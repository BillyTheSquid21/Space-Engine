\hypertarget{_shape_factory_8h_source}{}\doxysection{Shape\+Factory.\+h}
\label{_shape_factory_8h_source}\index{D:/Repositories/Space Engine/SpaceGame/include/renderer/ShapeFactory.h@{D:/Repositories/Space Engine/SpaceGame/include/renderer/ShapeFactory.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef SHAPE\_FACTORY\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define SHAPE\_FACTORY\_H}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <array>}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include <glm/glm.hpp>}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include <glm/gtc/type\_ptr.hpp>}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include <glm/gtc/matrix\_transform.hpp>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include <glm/gtx/rotate\_vector.hpp>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include <glm/gtx/vector\_angle.hpp>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}utility/SGUtil.h"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}Vertex.hpp"{}}}
\DoxyCodeLine{14 }
\DoxyCodeLine{15 \textcolor{comment}{//Basic primitives}}
\DoxyCodeLine{16 \textcolor{keyword}{namespace }Primitive}
\DoxyCodeLine{17 \{   }
\DoxyCodeLine{18     \textcolor{comment}{//Quads}}
\DoxyCodeLine{19     \textcolor{keyword}{const} \textcolor{keywordtype}{char} QUAD\_VERT = 4;}
\DoxyCodeLine{20     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} Q\_IND[6]}
\DoxyCodeLine{21     \{}
\DoxyCodeLine{22         0, 1, 2,}
\DoxyCodeLine{23         0, 2, 3}
\DoxyCodeLine{24     \};}
\DoxyCodeLine{25     \textcolor{keyword}{const} \textcolor{keywordtype}{char} Q\_IND\_COUNT = 6;}
\DoxyCodeLine{26 }
\DoxyCodeLine{27     \textcolor{comment}{//Tris}}
\DoxyCodeLine{28     \textcolor{keyword}{const} \textcolor{keywordtype}{char} TRI\_VERT = 3;}
\DoxyCodeLine{29     \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} T\_IND[6]}
\DoxyCodeLine{30     \{}
\DoxyCodeLine{31         0, 1, 2}
\DoxyCodeLine{32     \};  }
\DoxyCodeLine{33     \textcolor{keyword}{const} \textcolor{keywordtype}{char} T\_IND\_COUNT = 3;}
\DoxyCodeLine{34 \}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{preprocessor}{\#define Quad std::array<ColorTextureVertex, 4>}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#define TextureQuad std::array<TextureVertex, 4>}}
\DoxyCodeLine{38 \textcolor{preprocessor}{\#define Line std::array<ColorTextureVertex, 4>  }\textcolor{comment}{//Line is just a quad set up to be more convinient}}
\DoxyCodeLine{39 \textcolor{preprocessor}{\#define Tri std::array<ColorTextureVertex, 3>}}
\DoxyCodeLine{40 }
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \textcolor{keyword}{enum class} Shape}
\DoxyCodeLine{43 \{   }
\DoxyCodeLine{44     \textcolor{comment}{//Base shapes}}
\DoxyCodeLine{45     TRI, QUAD, LINE}
\DoxyCodeLine{46 \};}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{comment}{//Layer constants -\/ not necessary but makes easier and provides enough layers}}
\DoxyCodeLine{49 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_1 = -\/0.8f;}
\DoxyCodeLine{50 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_2 = -\/0.6f;}
\DoxyCodeLine{51 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_3 = -\/0.4f;}
\DoxyCodeLine{52 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_4 = -\/0.2f;}
\DoxyCodeLine{53 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_5 =  0.0f;}
\DoxyCodeLine{54 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_6 =  0.2f;}
\DoxyCodeLine{55 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_7 =  0.4f;}
\DoxyCodeLine{56 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_8 =  0.6f;}
\DoxyCodeLine{57 \textcolor{keyword}{const} \textcolor{keywordtype}{float} LAYER\_9 =  0.8f;}
\DoxyCodeLine{58 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_1 = 0.82f;}
\DoxyCodeLine{59 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_2 = 0.84f;}
\DoxyCodeLine{60 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_3 = 0.86f;}
\DoxyCodeLine{61 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_4 = 0.88f;}
\DoxyCodeLine{62 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_5 = 0.90f;}
\DoxyCodeLine{63 \textcolor{keyword}{const} \textcolor{keywordtype}{float} GUI\_LAYER\_6 = 0.92f;}
\DoxyCodeLine{64 }
\DoxyCodeLine{65 \textcolor{comment}{//Shape Creation}}
\DoxyCodeLine{66 Quad CreateQuad(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} width, \textcolor{keywordtype}{float} height, \textcolor{keywordtype}{float} uvX, \textcolor{keywordtype}{float} uvY, \textcolor{keywordtype}{float} uvWidth, \textcolor{keywordtype}{float} uvHeight);}
\DoxyCodeLine{67 TextureQuad CreateTextureQuad(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} width, \textcolor{keywordtype}{float} height, \textcolor{keywordtype}{float} uvX, \textcolor{keywordtype}{float} uvY, \textcolor{keywordtype}{float} uvWidth, \textcolor{keywordtype}{float} uvHeight);}
\DoxyCodeLine{68 Line CreateLine(\textcolor{keywordtype}{float} xStart, \textcolor{keywordtype}{float} yStart, \textcolor{keywordtype}{float} xEnd, \textcolor{keywordtype}{float} yEnd, \textcolor{keywordtype}{float} stroke);}
\DoxyCodeLine{69 Tri CreateTri(\textcolor{keywordtype}{float} x, \textcolor{keywordtype}{float} y, \textcolor{keywordtype}{float} radius);}
\DoxyCodeLine{70 }
\DoxyCodeLine{71 \textcolor{comment}{//Currently only applies to color texture vertex -\/ will update if another derived vertex needs to access colour}}
\DoxyCodeLine{72 \textcolor{keywordtype}{void} ColorShape(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{float} r, \textcolor{keywordtype}{float} g, \textcolor{keywordtype}{float} b, Shape type);}
\DoxyCodeLine{73 \textcolor{keywordtype}{void} ColorShapeVertex(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertex, \textcolor{keywordtype}{float} r, \textcolor{keywordtype}{float} g, \textcolor{keywordtype}{float} b, Shape type);}
\DoxyCodeLine{74 \textcolor{keywordtype}{void} TransparencyShape(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{float} alpha, Shape type);}
\DoxyCodeLine{75 \textcolor{keywordtype}{void} TransparencyShapeVertex(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} index, \textcolor{keywordtype}{float} alpha, Shape type);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77 \textcolor{comment}{//Currently only applies to texture vertex -\/ will update if another derived vertex needs to access uvs}}
\DoxyCodeLine{78 \textcolor{keywordtype}{void} SetQuadUV(\mbox{\hyperlink{struct_texture_vertex}{TextureVertex}}* verticesArray, \textcolor{keywordtype}{float} u, \textcolor{keywordtype}{float} v, \textcolor{keywordtype}{float} width, \textcolor{keywordtype}{float} height);}
\DoxyCodeLine{79 }
\DoxyCodeLine{80 \textcolor{comment}{//Utility}}
\DoxyCodeLine{81 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} GetVerticesCount(Shape type);}
\DoxyCodeLine{82 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{83 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} GetFloatCount(Shape type) \{}
\DoxyCodeLine{84     \textcolor{keywordflow}{return} (\textcolor{keyword}{sizeof}(T) / \textcolor{keyword}{sizeof}(\textcolor{keywordtype}{float})) * GetVerticesCount(type);}
\DoxyCodeLine{85 \}}
\DoxyCodeLine{86 }
\DoxyCodeLine{87 \textcolor{comment}{//Shape translation -\/ all shapes are defined relative to centre}}
\DoxyCodeLine{88 \textcolor{keyword}{static} \textcolor{keywordtype}{void} TranslateShapeVertexInternal(\textcolor{keywordtype}{void}* vertexPointer, \textcolor{keywordtype}{float} deltaX, \textcolor{keywordtype}{float} deltaY, \textcolor{keywordtype}{float} deltaZ) \{}
\DoxyCodeLine{89     \mbox{\hyperlink{struct_vertex}{Vertex}}* vertex = (\mbox{\hyperlink{struct_vertex}{Vertex}}*)(\textcolor{keywordtype}{void}*)vertexPointer;}
\DoxyCodeLine{90     vertex-\/>position.a += deltaX;}
\DoxyCodeLine{91     vertex-\/>position.b += deltaY;}
\DoxyCodeLine{92     vertex-\/>position.c += deltaZ;}
\DoxyCodeLine{93 \}}
\DoxyCodeLine{94 }
\DoxyCodeLine{95 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{96 \textcolor{keywordtype}{void} TranslateShape(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{float} deltaX, \textcolor{keywordtype}{float} deltaY, \textcolor{keywordtype}{float} deltaZ, Shape type)}
\DoxyCodeLine{97 \{}
\DoxyCodeLine{98     T* vertexPointer = (T*)verticesArray;}
\DoxyCodeLine{99 }
\DoxyCodeLine{100     \textcolor{comment}{//Set number of vertices to translate}}
\DoxyCodeLine{101     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} numberOfVertices = GetVerticesCount(type);}
\DoxyCodeLine{102 }
\DoxyCodeLine{103     \textcolor{comment}{//Translate for each vertice}}
\DoxyCodeLine{104     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numberOfVertices; i++) \{}
\DoxyCodeLine{105         TranslateShapeVertexInternal(\&vertexPointer[i], deltaX, deltaY, deltaZ);}
\DoxyCodeLine{106     \}}
\DoxyCodeLine{107 \}}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{110 \textcolor{keywordtype}{void} TranslateShapeVertex(\textcolor{keywordtype}{void}* verticesArray, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} index, \textcolor{keywordtype}{float} deltaX, \textcolor{keywordtype}{float} deltaY, \textcolor{keywordtype}{float} deltaZ)}
\DoxyCodeLine{111 \{}
\DoxyCodeLine{112     T* vertexPointer = (T*)verticesArray;}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     \textcolor{comment}{//Translate for each vertice}}
\DoxyCodeLine{115     TranslateShapeVertexInternal(\&vertexPointer[index], deltaX, deltaY, deltaZ);}
\DoxyCodeLine{116 \}}
\DoxyCodeLine{117 }
\DoxyCodeLine{118 \textcolor{comment}{//Position shapes}}
\DoxyCodeLine{119 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{120 \textcolor{keywordtype}{void} PositionShape(\textcolor{keywordtype}{void}* verticesArray, \mbox{\hyperlink{struct_component3f}{Component3f}} currentPosition, \mbox{\hyperlink{struct_component3f}{Component3f}} newPosition, Shape type)}
\DoxyCodeLine{121 \{}
\DoxyCodeLine{122     \textcolor{comment}{//get amount to translate by}}
\DoxyCodeLine{123     \textcolor{keywordtype}{float} deltaX = newPosition.a -\/ currentPosition.a;}
\DoxyCodeLine{124     \textcolor{keywordtype}{float} deltaY = newPosition.b -\/ currentPosition.b;}
\DoxyCodeLine{125     \textcolor{keywordtype}{float} deltaZ = newPosition.c -\/ currentPosition.c;}
\DoxyCodeLine{126 }
\DoxyCodeLine{127     TranslateShape<T>(verticesArray, deltaX, deltaY, deltaZ, type);}
\DoxyCodeLine{128 \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130 \textcolor{comment}{//Rotation}}
\DoxyCodeLine{131 \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{132 \textcolor{keywordtype}{void} RotateShape(\textcolor{keywordtype}{void}* verticesArray, \mbox{\hyperlink{struct_component3f}{Component3f}} rotationCentre, \textcolor{keywordtype}{float} angle, Shape type, Axis axis)}
\DoxyCodeLine{133 \{}
\DoxyCodeLine{134     T* vertexPointer = (T*)verticesArray;}
\DoxyCodeLine{135 }
\DoxyCodeLine{136     \textcolor{comment}{//Set number of vertices to translate}}
\DoxyCodeLine{137     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} numberOfVertices = GetVerticesCount(type);}
\DoxyCodeLine{138 }
\DoxyCodeLine{139     glm::vec3 axisVector = \{ 1.0f, 0.0f, 0.0f \};}
\DoxyCodeLine{140     \textcolor{keywordflow}{switch} (axis)}
\DoxyCodeLine{141     \{}
\DoxyCodeLine{142     \textcolor{keywordflow}{case} Axis::X:}
\DoxyCodeLine{143         axisVector = \{ 1.0f, 0.0f, 0.0f \};}
\DoxyCodeLine{144         \textcolor{keywordflow}{break};}
\DoxyCodeLine{145     \textcolor{keywordflow}{case} Axis::Y:}
\DoxyCodeLine{146         axisVector = \{ 0.0f, 1.0f, 0.0f \};}
\DoxyCodeLine{147         \textcolor{keywordflow}{break};}
\DoxyCodeLine{148     \textcolor{keywordflow}{case} Axis::Z:}
\DoxyCodeLine{149         axisVector = \{ 0.0f, 0.0f, 1.0f \};}
\DoxyCodeLine{150         \textcolor{keywordflow}{break};}
\DoxyCodeLine{151     \}}
\DoxyCodeLine{152 }
\DoxyCodeLine{153     \textcolor{comment}{//Translate for each vertice}}
\DoxyCodeLine{154     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < numberOfVertices; i++) \{}
\DoxyCodeLine{155         \mbox{\hyperlink{struct_vertex}{Vertex}}* vertex = (\mbox{\hyperlink{struct_vertex}{Vertex}}*)(\textcolor{keywordtype}{void}*)\&vertexPointer[i];}
\DoxyCodeLine{156         glm::vec3 position = \{ vertex-\/>position.a -\/ rotationCentre.a, vertex-\/>position.b -\/ rotationCentre.b, vertex-\/>position.c -\/ rotationCentre.c \};}
\DoxyCodeLine{157         position = glm::rotate(position, glm::radians(angle), axisVector);}
\DoxyCodeLine{158         vertex-\/>position = \{ position.x + rotationCentre.a, position.y + rotationCentre.b, position.z + rotationCentre.c \};}
\DoxyCodeLine{159     \}}
\DoxyCodeLine{160 \}}
\DoxyCodeLine{161 }
\DoxyCodeLine{162 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
