\hypertarget{_render_queue_8hpp_source}{}\doxysection{Render\+Queue.\+hpp}
\label{_render_queue_8hpp_source}\index{D:/Repositories/Space Engine/SpaceGame/include/renderer/RenderQueue.hpp@{D:/Repositories/Space Engine/SpaceGame/include/renderer/RenderQueue.hpp}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef RENDER\_QUEUE\_HPP}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define RENDER\_QUEUE\_HPP}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}utility/SGUtil.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{namespace }Render}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{11     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_render_1_1_bulk_node}{BulkNode}}}
\DoxyCodeLine{12     \{}
\DoxyCodeLine{13         \mbox{\hyperlink{struct_render_1_1_bulk_node}{BulkNode}}() : verts(MAX\_IN\_BATCH) \{\}}
\DoxyCodeLine{14         std::vector<T> verts;}
\DoxyCodeLine{15         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} currentElements = 0;}
\DoxyCodeLine{16         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} MAX\_IN\_BATCH = 96;}
\DoxyCodeLine{17         std::shared\_ptr<BulkNode> nextNode = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{18     \};}
\DoxyCodeLine{19 }
\DoxyCodeLine{20     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{21     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_render_1_1_bulk_render_node}{BulkRenderNode}}}
\DoxyCodeLine{22     \{}
\DoxyCodeLine{23         \mbox{\hyperlink{struct_render_1_1_bulk_render_node}{BulkRenderNode}}() : verts(MAX\_IN\_BATCH), vertFloats(MAX\_IN\_BATCH), inds(MAX\_IN\_BATCH), indCount(MAX\_IN\_BATCH) \{\}}
\DoxyCodeLine{24         std::vector<T> verts;}
\DoxyCodeLine{25         std::vector<unsigned int> vertFloats;}
\DoxyCodeLine{26         std::vector<const unsigned int*> inds;}
\DoxyCodeLine{27         std::vector<unsigned int> indCount;}
\DoxyCodeLine{28         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} currentElements = 0;}
\DoxyCodeLine{29         \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} MAX\_IN\_BATCH = 96;}
\DoxyCodeLine{30         std::shared\_ptr<BulkRenderNode> nextNode = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{31     \};}
\DoxyCodeLine{32 }
\DoxyCodeLine{33     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{34     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_render_1_1_render_container}{RenderContainer}}}
\DoxyCodeLine{35     \{}
\DoxyCodeLine{36         T verts;}
\DoxyCodeLine{37         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertFloats;}
\DoxyCodeLine{38         \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* inds;}
\DoxyCodeLine{39         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} indCount;}
\DoxyCodeLine{40     \};}
\DoxyCodeLine{41 }
\DoxyCodeLine{42     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{43     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_render_1_1_bulk_container}{BulkContainer}}}
\DoxyCodeLine{44     \{}
\DoxyCodeLine{45         std::vector<T> verts;}
\DoxyCodeLine{46         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} elementsCount = 0;}
\DoxyCodeLine{47     \};}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{50     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_render_1_1_bulk_render_container}{BulkRenderContainer}}}
\DoxyCodeLine{51     \{}
\DoxyCodeLine{52         std::vector<T> verts;}
\DoxyCodeLine{53         std::vector<unsigned int> vertFloats;}
\DoxyCodeLine{54         std::vector<const unsigned int*> inds;}
\DoxyCodeLine{55         std::vector<unsigned int> indCount;}
\DoxyCodeLine{56         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} elementsCount = 0;}
\DoxyCodeLine{57     \};}
\DoxyCodeLine{58 }
\DoxyCodeLine{64     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{65     \textcolor{keyword}{class }\mbox{\hyperlink{class_render_1_1_bulk_queue}{BulkQueue}}}
\DoxyCodeLine{66     \{}
\DoxyCodeLine{67     \textcolor{keyword}{public}:}
\DoxyCodeLine{72         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_render_1_1_bulk_queue_a67e365bcd97cc1374a32b6593fd493bd}{pushBack}}(T \textcolor{keywordtype}{object})}
\DoxyCodeLine{73         \{}
\DoxyCodeLine{74             \textcolor{comment}{//check if has been pushed yet}}
\DoxyCodeLine{75             \textcolor{keywordflow}{if} (m\_FirstPush) \{}
\DoxyCodeLine{76                 std::shared\_ptr<BulkNode<T>> firstNode(\textcolor{keyword}{new} \mbox{\hyperlink{struct_render_1_1_bulk_node}{BulkNode<T>}}());}
\DoxyCodeLine{77                 m\_FrontElement = firstNode;}
\DoxyCodeLine{78                 m\_CurrentElement = firstNode;}
\DoxyCodeLine{79                 m\_FirstPush = \textcolor{keyword}{false};}
\DoxyCodeLine{80                 m\_QueueSize++;}
\DoxyCodeLine{81             \}}
\DoxyCodeLine{82             \textcolor{comment}{//Check if current element is full}}
\DoxyCodeLine{83             \textcolor{comment}{//If is full, make new element, point to old one, replace}}
\DoxyCodeLine{84             \textcolor{keywordflow}{if} (m\_CurrentElement-\/>currentElements >= \mbox{\hyperlink{struct_render_1_1_bulk_node}{BulkNode<T>::MAX\_IN\_BATCH}}) \{}
\DoxyCodeLine{85                 \textcolor{comment}{//If is full, create new one}}
\DoxyCodeLine{86                 std::shared\_ptr<BulkNode<T>> newNode(\textcolor{keyword}{new} \mbox{\hyperlink{struct_render_1_1_bulk_node}{BulkNode<T>}}());}
\DoxyCodeLine{87                 \textcolor{comment}{//Assign new pointer to old node}}
\DoxyCodeLine{88                 m\_CurrentElement-\/>nextNode = newNode;}
\DoxyCodeLine{89                 m\_CurrentElement = newNode;}
\DoxyCodeLine{90                 m\_QueueSize++;}
\DoxyCodeLine{91             \}}
\DoxyCodeLine{92             \textcolor{comment}{//Get new current elements}}
\DoxyCodeLine{93             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} currentElements = m\_CurrentElement-\/>currentElements;}
\DoxyCodeLine{94             \textcolor{comment}{//Insert into new vectors}}
\DoxyCodeLine{95             m\_CurrentElement-\/>verts[currentElements] = object;}
\DoxyCodeLine{96             m\_CurrentElement-\/>currentElements += 1;}
\DoxyCodeLine{97         \}}
\DoxyCodeLine{98 }
\DoxyCodeLine{107         \mbox{\hyperlink{struct_render_1_1_bulk_container}{BulkContainer<T>}} \mbox{\hyperlink{class_render_1_1_bulk_queue_a4de0a3c2cea46d00b908dd23c9083af4}{nextInQueue}}()}
\DoxyCodeLine{108         \{}
\DoxyCodeLine{109             std::vector<T> verts = m\_FrontElement-\/>verts;}
\DoxyCodeLine{110             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} elementsCount = m\_FrontElement-\/>currentElements;}
\DoxyCodeLine{111 }
\DoxyCodeLine{112             \textcolor{comment}{//decrement total floats and ints}}
\DoxyCodeLine{113             \textcolor{comment}{//Sum all floats and inds}}
\DoxyCodeLine{114             m\_FrontElement = m\_FrontElement-\/>nextNode;}
\DoxyCodeLine{115             m\_QueueSize-\/-\/;}
\DoxyCodeLine{116 }
\DoxyCodeLine{117             \textcolor{comment}{//Return required data for drawing}}
\DoxyCodeLine{118             \textcolor{keywordflow}{return} \{ verts, elementsCount \};}
\DoxyCodeLine{119         \}}
\DoxyCodeLine{123         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_render_1_1_bulk_queue_afc973b0e81ac931230b7086fb54b01e9}{itemsWaiting}}() \{ \textcolor{keywordflow}{if} (m\_QueueSize == 0) \{ m\_FirstPush = \textcolor{keyword}{true}; \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \} \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{124         }
\DoxyCodeLine{128         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_render_1_1_bulk_queue_a00fa3ddb1e31518571aae9d0915603b6}{size}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_QueueSize; \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \textcolor{keyword}{private}:}
\DoxyCodeLine{131         \textcolor{keywordtype}{bool} m\_FirstPush = \textcolor{keyword}{true};}
\DoxyCodeLine{132         std::shared\_ptr<BulkNode<T>> m\_FrontElement = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{133         std::shared\_ptr<BulkNode<T>> m\_CurrentElement = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{134         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_QueueSize = 0;}
\DoxyCodeLine{135     \};}
\DoxyCodeLine{136 }
\DoxyCodeLine{137     \textcolor{keyword}{template} <\textcolor{keyword}{typename} T>}
\DoxyCodeLine{138     \textcolor{keyword}{class }\mbox{\hyperlink{class_render_1_1_bulk_render_queue}{BulkRenderQueue}}}
\DoxyCodeLine{139     \{}
\DoxyCodeLine{140     \textcolor{keyword}{public}:}
\DoxyCodeLine{150         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_ae4a389b442197c8e6059aea2ed71cf98}{pushBack}}(T \textcolor{keywordtype}{object}, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} floatCount, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* indices, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} indicesSize)}
\DoxyCodeLine{151         \{}
\DoxyCodeLine{152             \textcolor{comment}{//check if has been pushed yet}}
\DoxyCodeLine{153             \textcolor{keywordflow}{if} (m\_FirstPush) \{}
\DoxyCodeLine{154                 std::shared\_ptr<BulkRenderNode<T>> firstNode(\textcolor{keyword}{new} \mbox{\hyperlink{struct_render_1_1_bulk_render_node}{BulkRenderNode<T>}}());}
\DoxyCodeLine{155                 m\_FrontElement = firstNode;}
\DoxyCodeLine{156                 m\_CurrentElement = firstNode;}
\DoxyCodeLine{157                 m\_FirstPush = \textcolor{keyword}{false};}
\DoxyCodeLine{158                 m\_QueueSize++;}
\DoxyCodeLine{159             \}}
\DoxyCodeLine{160             \textcolor{comment}{//Check if current element is full}}
\DoxyCodeLine{161             \textcolor{comment}{//If is full, make new element, point to old one, replace}}
\DoxyCodeLine{162             \textcolor{keywordflow}{if} (m\_CurrentElement-\/>currentElements >= \mbox{\hyperlink{struct_render_1_1_bulk_render_node}{BulkRenderNode<T>::MAX\_IN\_BATCH}}) \{}
\DoxyCodeLine{163                 \textcolor{comment}{//If is full, create new one}}
\DoxyCodeLine{164                 std::shared\_ptr<BulkRenderNode<T>> newNode(\textcolor{keyword}{new} \mbox{\hyperlink{struct_render_1_1_bulk_render_node}{BulkRenderNode<T>}}());}
\DoxyCodeLine{165                 \textcolor{comment}{//Assign new pointer to old node}}
\DoxyCodeLine{166                 m\_CurrentElement-\/>nextNode = newNode;}
\DoxyCodeLine{167                 m\_CurrentElement = newNode;}
\DoxyCodeLine{168                 m\_QueueSize++;}
\DoxyCodeLine{169             \}}
\DoxyCodeLine{170             \textcolor{comment}{//Get new current elements}}
\DoxyCodeLine{171             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} currentElements = m\_CurrentElement-\/>currentElements;}
\DoxyCodeLine{172             \textcolor{comment}{//Insert into new vectors}}
\DoxyCodeLine{173             m\_CurrentElement-\/>verts[currentElements] = object;}
\DoxyCodeLine{174             m\_CurrentElement-\/>vertFloats[currentElements] = floatCount;}
\DoxyCodeLine{175             m\_CurrentElement-\/>inds[currentElements] = indices;}
\DoxyCodeLine{176             m\_CurrentElement-\/>indCount[currentElements] = indicesSize;}
\DoxyCodeLine{177             m\_CurrentElement-\/>currentElements += 1;}
\DoxyCodeLine{178             \textcolor{comment}{//Increment totals}}
\DoxyCodeLine{179             m\_TotalIndiceInts += indicesSize;}
\DoxyCodeLine{180             m\_TotalVerticeFloats += floatCount;}
\DoxyCodeLine{181         \}}
\DoxyCodeLine{182 }
\DoxyCodeLine{192         \mbox{\hyperlink{struct_render_1_1_bulk_render_container}{BulkRenderContainer<T>}} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_adf1320906479e4e0d73c416ce194260c}{nextInQueue}}()}
\DoxyCodeLine{193         \{}
\DoxyCodeLine{194             std::vector<T> verts = m\_FrontElement-\/>verts;}
\DoxyCodeLine{195             std::vector<unsigned int> vertFloats = m\_FrontElement-\/>vertFloats;}
\DoxyCodeLine{196             std::vector<const unsigned int*> inds = m\_FrontElement-\/>inds;}
\DoxyCodeLine{197             std::vector<unsigned int> indCount = m\_FrontElement-\/>indCount;}
\DoxyCodeLine{198             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} elementsCount = m\_FrontElement-\/>currentElements;}
\DoxyCodeLine{199 }
\DoxyCodeLine{200             \textcolor{comment}{//decrement total floats and ints}}
\DoxyCodeLine{201             \textcolor{comment}{//Sum all floats and inds}}
\DoxyCodeLine{202             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalFloats = 0;}
\DoxyCodeLine{203             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < vertFloats.size(); i++) \{}
\DoxyCodeLine{204                 totalFloats += vertFloats[i];}
\DoxyCodeLine{205             \}}
\DoxyCodeLine{206             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} totalInds = 0;}
\DoxyCodeLine{207             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < indCount.size(); i++) \{}
\DoxyCodeLine{208                 totalInds += indCount[i];}
\DoxyCodeLine{209             \}}
\DoxyCodeLine{210             m\_TotalVerticeFloats -\/= totalFloats;}
\DoxyCodeLine{211             m\_TotalIndiceInts -\/= totalInds;}
\DoxyCodeLine{212 }
\DoxyCodeLine{213             m\_FrontElement = m\_FrontElement-\/>nextNode;}
\DoxyCodeLine{214             m\_QueueSize-\/-\/;}
\DoxyCodeLine{215 }
\DoxyCodeLine{216             \textcolor{comment}{//Return required data for drawing}}
\DoxyCodeLine{217             \textcolor{keywordflow}{return} \{ verts, vertFloats, inds, indCount, elementsCount \};}
\DoxyCodeLine{218         \}}
\DoxyCodeLine{219 }
\DoxyCodeLine{223         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_a675ebe4ac68c692fe5d678adcb82c142}{vertFloatCount}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_TotalVerticeFloats; \}}
\DoxyCodeLine{224         }
\DoxyCodeLine{228         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_a7b9ba6182abc446b88ef0d0ba62def5d}{indIntCount}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_TotalIndiceInts; \}}
\DoxyCodeLine{229         }
\DoxyCodeLine{233         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_a98a0ca2e7dea4c4b1f7ddba24503f9af}{itemsWaiting}}() \{ \textcolor{keywordflow}{if} (m\_QueueSize == 0) \{ m\_FirstPush = \textcolor{keyword}{true}; \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \} \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{234         }
\DoxyCodeLine{238         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_render_1_1_bulk_render_queue_a7db945f778a39dd2920d2cd893e845e2}{size}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_QueueSize; \}}
\DoxyCodeLine{239     \textcolor{keyword}{private}:}
\DoxyCodeLine{240         \textcolor{keywordtype}{bool} m\_FirstPush = \textcolor{keyword}{true};}
\DoxyCodeLine{241         std::shared\_ptr<BulkRenderNode<T>> m\_FrontElement = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{242         std::shared\_ptr<BulkRenderNode<T>> m\_CurrentElement = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{243         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_TotalVerticeFloats = 0;}
\DoxyCodeLine{244         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_TotalIndiceInts = 0;}
\DoxyCodeLine{245         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_QueueSize = 0;}
\DoxyCodeLine{246     \};}
\DoxyCodeLine{247 }
\DoxyCodeLine{248 \}}
\DoxyCodeLine{249 }
\DoxyCodeLine{250 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{251 }

\end{DoxyCode}
