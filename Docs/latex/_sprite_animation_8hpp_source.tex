\hypertarget{_sprite_animation_8hpp_source}{}\doxysection{Sprite\+Animation.\+hpp}
\label{_sprite_animation_8hpp_source}\index{D:/Repositories/Space Engine/SpaceGame/include/game/objects/SpriteAnimation.hpp@{D:/Repositories/Space Engine/SpaceGame/include/game/objects/SpriteAnimation.hpp}}
\mbox{\hyperlink{_sprite_animation_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef SPRITE\_ANIMATION\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define SPRITE\_ANIMATION\_H}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include <vector>}}
\DoxyCodeLine{6 }
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_game_object_8hpp}{core/GameObject.hpp}}"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_tile_map_8h}{game/objects/TileMap.h}}"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_geometry_8h}{renderer/Geometry.h}}"{}}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 \textcolor{keyword}{template}<\textcolor{keyword}{typename} Vert, \textcolor{keyword}{typename} Q>}
\DoxyCodeLine{12 \textcolor{keyword}{class }\mbox{\hyperlink{class_sprite_anim}{SpriteAnim}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_s_g_object_1_1_update_component}{SGObject::UpdateComponent}}}
\DoxyCodeLine{13 \{}
\DoxyCodeLine{14 \textcolor{keyword}{public}:}
\DoxyCodeLine{15     \mbox{\hyperlink{class_sprite_anim_aafdfcdd99d919db13090277cb0376cab}{SpriteAnim}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{16     \mbox{\hyperlink{class_sprite_anim_af0f4e1c8d1f3768436c757fdd7cefb30}{SpriteAnim}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} frameRate, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} frameCount)}
\DoxyCodeLine{17     \{}
\DoxyCodeLine{18         m\_Frames.resize(frameCount);}
\DoxyCodeLine{19         m\_TimePerFrame = 1 / (float)frameRate;}
\DoxyCodeLine{20     \}}
\DoxyCodeLine{21 }
\DoxyCodeLine{22     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_sprite_anim_aed478e7be38affd244292b6c8390e194}{setFrame}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} index, \mbox{\hyperlink{struct_tile_u_v}{TileUV}} frame)}
\DoxyCodeLine{23     \{}
\DoxyCodeLine{24         \textcolor{keywordflow}{if} (index >= m\_Frames.size())}
\DoxyCodeLine{25         \{}
\DoxyCodeLine{26             \mbox{\hyperlink{_s_g_util_8h_a2c622e9c0f75f5dcfc0a761f0b9bf481}{EngineLog}}(\textcolor{stringliteral}{"{}Frame does not exist!"{}});}
\DoxyCodeLine{27             \textcolor{keywordflow}{return};}
\DoxyCodeLine{28         \}}
\DoxyCodeLine{29         m\_Frames[index] = frame;}
\DoxyCodeLine{30     \}}
\DoxyCodeLine{31     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_sprite_anim_abca283fe68efe8698b9a95bfec81aa3a}{linkSprite}}(Q* sprite, \textcolor{keywordtype}{bool}* animationActive) \{ m\_Sprite = sprite; m\_Active = animationActive; \}}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_sprite_anim_a53dcd6aec5df0d85dafd4f73a779b06d}{update}}(\textcolor{keywordtype}{double} deltaTime)}
\DoxyCodeLine{33     \{}
\DoxyCodeLine{34         \textcolor{keywordflow}{if} (!m\_Active || !(*m\_Active))}
\DoxyCodeLine{35         \{}
\DoxyCodeLine{36             \textcolor{keywordflow}{return};}
\DoxyCodeLine{37         \}}
\DoxyCodeLine{38         \textcolor{keywordflow}{if} (m\_CurrentTime >= m\_TimePerFrame)}
\DoxyCodeLine{39         \{}
\DoxyCodeLine{40             m\_CurrentFrame++;}
\DoxyCodeLine{41             m\_CurrentTime = 0.0f;}
\DoxyCodeLine{42 }
\DoxyCodeLine{43             \textcolor{keywordflow}{if} (m\_CurrentFrame >= m\_Frames.size())}
\DoxyCodeLine{44             \{}
\DoxyCodeLine{45                 m\_CurrentFrame = 0;}
\DoxyCodeLine{46                 \mbox{\hyperlink{struct_tile_u_v}{TileUV}} uv = m\_Frames[m\_CurrentFrame];}
\DoxyCodeLine{47                 Geometry::SetQuadUV<Vert>((Vert*)m\_Sprite, uv.\mbox{\hyperlink{struct_tile_u_v_a9db0853996b7df947a567855c64ea969}{u}}, uv.\mbox{\hyperlink{struct_tile_u_v_a14d848bb1dd62bde326c1c47d5af94e0}{v}}, uv.\mbox{\hyperlink{struct_tile_u_v_adca91d3e7c5d571e8d8a038c33dd4e62}{width}}, uv.\mbox{\hyperlink{struct_tile_u_v_a18a832e9a8a5982f82beaf3d52c48120}{height}});}
\DoxyCodeLine{48                 \textcolor{keywordflow}{if} (!\mbox{\hyperlink{class_sprite_anim_a99d189505421b4648082446dfae11dc1}{loop}})}
\DoxyCodeLine{49                 \{}
\DoxyCodeLine{50                     *m\_Active = \textcolor{keyword}{false};}
\DoxyCodeLine{51                     \textcolor{keywordflow}{return};}
\DoxyCodeLine{52                 \}}
\DoxyCodeLine{53             \}}
\DoxyCodeLine{54             \mbox{\hyperlink{struct_tile_u_v}{TileUV}} uv = m\_Frames[m\_CurrentFrame];}
\DoxyCodeLine{55             Geometry::SetQuadUV<Vert>((Vert*)m\_Sprite, uv.\mbox{\hyperlink{struct_tile_u_v_a9db0853996b7df947a567855c64ea969}{u}}, uv.\mbox{\hyperlink{struct_tile_u_v_a14d848bb1dd62bde326c1c47d5af94e0}{v}}, uv.\mbox{\hyperlink{struct_tile_u_v_adca91d3e7c5d571e8d8a038c33dd4e62}{width}}, uv.\mbox{\hyperlink{struct_tile_u_v_a18a832e9a8a5982f82beaf3d52c48120}{height}});}
\DoxyCodeLine{56         \}}
\DoxyCodeLine{57 }
\DoxyCodeLine{58         m\_CurrentTime += deltaTime;}
\DoxyCodeLine{59     \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_sprite_anim_a99d189505421b4648082446dfae11dc1}{loop}} = \textcolor{keyword}{false};}
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{private}:}
\DoxyCodeLine{64     \textcolor{comment}{//Timings}}
\DoxyCodeLine{65     \textcolor{keywordtype}{float} m\_TimePerFrame = 0.0f;}
\DoxyCodeLine{66     \textcolor{keywordtype}{float} m\_CurrentTime = 0.0f;}
\DoxyCodeLine{67     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_CurrentFrame = 0;}
\DoxyCodeLine{68 }
\DoxyCodeLine{69     \textcolor{keywordtype}{bool}* m\_Active = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{70     Q* m\_Sprite = \textcolor{keyword}{nullptr}; \textcolor{comment}{//TODO make generic if need be}}
\DoxyCodeLine{71     std::vector<TileUV> m\_Frames;}
\DoxyCodeLine{72 \};}
\DoxyCodeLine{73 }
\DoxyCodeLine{74 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
