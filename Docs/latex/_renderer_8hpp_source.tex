\hypertarget{_renderer_8hpp_source}{}\doxysection{Renderer.\+hpp}
\label{_renderer_8hpp_source}\index{D:/Repositories/Space Engine/SpaceGame/include/renderer/Renderer.hpp@{D:/Repositories/Space Engine/SpaceGame/include/renderer/Renderer.hpp}}
\mbox{\hyperlink{_renderer_8hpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef RENDERER\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define RENDERER\_H}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_geometry_8h}{renderer/Geometry.h}}"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_g_l_classes_8h}{renderer/GLClasses.h}}"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_camera_8h}{renderer/Camera.h}}"{}}}
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_seg_array_8hpp}{utility/SegArray.hpp}}"{}}}
\DoxyCodeLine{9 }
\DoxyCodeLine{10 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_s_g_render}{SGRender}}}
\DoxyCodeLine{11 \{}
\DoxyCodeLine{20     \textcolor{keyword}{class }\mbox{\hyperlink{class_s_g_render_1_1_renderer}{Renderer}}}
\DoxyCodeLine{21     \{}
\DoxyCodeLine{22     \textcolor{keyword}{public}:}
\DoxyCodeLine{23         \mbox{\hyperlink{class_s_g_render_1_1_renderer_af1bb0cf625feddb71c1b755efeaa62ee}{Renderer}}() : \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}() \{\};}
\DoxyCodeLine{24 }
\DoxyCodeLine{28         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a27d3962925d546f541a0510ef47e4529}{generate}}(\textcolor{keywordtype}{float} width, \textcolor{keywordtype}{float} height, \mbox{\hyperlink{class_s_g_render_1_1_camera}{Camera}}* cam, \textcolor{keywordtype}{size\_t} bufferWidth)}
\DoxyCodeLine{29         \{}
\DoxyCodeLine{30             \textcolor{comment}{//Init camera}}
\DoxyCodeLine{31             \mbox{\hyperlink{class_s_g_render_1_1_renderer_abd7b70c7842cf54f71ca63eecbab8dce}{camera}} = cam;}
\DoxyCodeLine{32             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a7d050f2ed8f5c4e2027b807fef3a23a3}{create}}();    \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4bf8423d598df18a1fbe30afdc5edd66}{m\_VB}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_a64fd7435af82df355e3ac9d0d7713550}{create}}(bufferWidth); \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}}.\mbox{\hyperlink{class_s_g_render_1_1_index_buffer_a6f24eca19367268193de81473f3a5b96}{create}}(1);}
\DoxyCodeLine{33             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a614dff7d8c9cd5ed52b0ac9efad33d3e}{addBuffer}}(\mbox{\hyperlink{class_s_g_render_1_1_renderer_a4bf8423d598df18a1fbe30afdc5edd66}{m\_VB}}, \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}});}
\DoxyCodeLine{34             \textcolor{comment}{//Bind}}
\DoxyCodeLine{35             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a501ca9ef32a79a9213b3e29c56be7496}{bind}}(); \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4bf8423d598df18a1fbe30afdc5edd66}{m\_VB}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_a2fee8540b8760ff00e5127603f41b5e5}{unbind}}(); \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}}.\mbox{\hyperlink{class_s_g_render_1_1_index_buffer_aad5f92076e57827167a8e7be32061475}{unbind}}();}
\DoxyCodeLine{36             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a703e04c4c278ba613f5d8ea3970be612}{m\_VertBuffWidth}} = bufferWidth;}
\DoxyCodeLine{37         \}}
\DoxyCodeLine{38         \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{39         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2b881c8e474bdaad3ed478502eb254e5}{addInstances}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} bufferWidth, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} instanceDataStride, \textcolor{keywordtype}{int} startLocation)}
\DoxyCodeLine{40         \{}
\DoxyCodeLine{41             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a6efe7566c6d6067c9be4d778b10ab8de}{m\_VBInstances}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_a64fd7435af82df355e3ac9d0d7713550}{create}}(bufferWidth);}
\DoxyCodeLine{42             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4450b6ecaabad7d6c87c98bbc31825fd}{m\_VBLInstances}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<T>(instanceDataStride, \textcolor{keyword}{true});}
\DoxyCodeLine{43             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a614dff7d8c9cd5ed52b0ac9efad33d3e}{addBuffer}}(\mbox{\hyperlink{class_s_g_render_1_1_renderer_a6efe7566c6d6067c9be4d778b10ab8de}{m\_VBInstances}}, \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4450b6ecaabad7d6c87c98bbc31825fd}{m\_VBLInstances}}, startLocation);}
\DoxyCodeLine{44             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a501ca9ef32a79a9213b3e29c56be7496}{bind}}(); \mbox{\hyperlink{class_s_g_render_1_1_renderer_a6efe7566c6d6067c9be4d778b10ab8de}{m\_VBInstances}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_a2fee8540b8760ff00e5127603f41b5e5}{unbind}}();}
\DoxyCodeLine{45             \mbox{\hyperlink{class_s_g_render_1_1_renderer_aa7f15fdb980cf57f2b9a5b379cacfc6f}{m\_InstBuffWidth}} = bufferWidth;}
\DoxyCodeLine{46         \}}
\DoxyCodeLine{47         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_ad36f9c8c98c4b72170d4e7032db985d9}{clearScreen}}() \{ glClear(GL\_COLOR\_BUFFER\_BIT | GL\_DEPTH\_BUFFER\_BIT); \}}
\DoxyCodeLine{48 }
\DoxyCodeLine{54         \textcolor{keyword}{template}<\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{55         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_acb094ff22ca49d15985f1ac1fea48d0b}{setLayout}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride) \{ \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride, \textcolor{keyword}{false}); \}}
\DoxyCodeLine{56         \textcolor{keyword}{template}<\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{57         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac3c4bb4de42deca876e4cd412d2ecaa8}{setLayout}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride1, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride2) \{ \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride1, \textcolor{keyword}{false}); \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride2, \textcolor{keyword}{false}); \}}
\DoxyCodeLine{58         \textcolor{keyword}{template}<\textcolor{keyword}{typename} Type>}
\DoxyCodeLine{59         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2ec5f2af4710299517a2d345a5a5d1d6}{setLayout}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride1, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride2, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} stride3) \{ \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride1, \textcolor{keyword}{false}); \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride2, \textcolor{keyword}{false}); \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout_a83a6a1415cf58d82eef71344103f72d1}{push}}<Type>(stride3, \textcolor{keyword}{false}); \}}
\DoxyCodeLine{60 }
\DoxyCodeLine{64         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_acefb1b04c0770bfdfd1b6488a1068373}{setDrawingMode}}(GLenum type) \{ \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac864edf665d66f9326d0b94888802410}{m\_PrimitiveType}} = type; \}}
\DoxyCodeLine{65 }
\DoxyCodeLine{74         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac5bdfb545d6ce8a359929cd77bacaa7f}{commit}}(\textcolor{keywordtype}{void}* vert, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertSize, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* ind, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} indSize) }
\DoxyCodeLine{75         \{ }
\DoxyCodeLine{76             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}} >= \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}.size())}
\DoxyCodeLine{77             \{}
\DoxyCodeLine{78                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}.emplaceBack(vert, vertSize, ind, indSize);}
\DoxyCodeLine{79             \}}
\DoxyCodeLine{80             \textcolor{keywordflow}{else}}
\DoxyCodeLine{81             \{}
\DoxyCodeLine{82                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}[\mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}}] = \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a5150b6497de826144deef893022a0380}{RenderInfo::RenderInfo}}(vert, vertSize, ind, indSize);}
\DoxyCodeLine{83             \}}
\DoxyCodeLine{84             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a5e8f39513492c56368bbdc7801442906}{m\_VertSize}} += vertSize; \mbox{\hyperlink{class_s_g_render_1_1_renderer_acb2d50d9dfff70155e03a9ed31a4ccd0}{m\_IndSize}} += indSize;}
\DoxyCodeLine{85             \mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}}++;}
\DoxyCodeLine{86         \}   }
\DoxyCodeLine{87 }
\DoxyCodeLine{95         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_abfef20309eef49bfed97034e8998c8b0}{commitInstance}}(\textcolor{keywordtype}{void}* data, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dataSize, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} count)}
\DoxyCodeLine{96         \{}
\DoxyCodeLine{97             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} >= \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}.size())}
\DoxyCodeLine{98             \{}
\DoxyCodeLine{99                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}.emplaceBack(data, dataSize);}
\DoxyCodeLine{100             \}}
\DoxyCodeLine{101             \textcolor{keywordflow}{else}}
\DoxyCodeLine{102             \{}
\DoxyCodeLine{103                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}[\mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}}] = \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_ac57a906aaabf431ef1a89ed5b50bb6b1}{InstanceInfo::InstanceInfo}}(data, dataSize);}
\DoxyCodeLine{104             \}}
\DoxyCodeLine{105             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a1e74bb9d7997519388c22153fc750c1c}{m\_InstanceSize}} += dataSize;}
\DoxyCodeLine{106             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}}++;}
\DoxyCodeLine{107             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_a065c98f308caa87a62e5bb3ebf1ec64e}{m\_FirstInstance}})}
\DoxyCodeLine{108             \{}
\DoxyCodeLine{109                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}} = 0;}
\DoxyCodeLine{110                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a065c98f308caa87a62e5bb3ebf1ec64e}{m\_FirstInstance}} = \textcolor{keyword}{false};}
\DoxyCodeLine{111             \}}
\DoxyCodeLine{112             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}} += count;}
\DoxyCodeLine{113         \}}
\DoxyCodeLine{114         }
\DoxyCodeLine{119         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a592e47ea71474d03614744da52fd3e89}{drawPrimitives}}() \{}
\DoxyCodeLine{120             \textcolor{comment}{//Bind all objects}}
\DoxyCodeLine{121             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a5b6c901838d899ccb351716e31af0871}{bindAll}}();}
\DoxyCodeLine{122             \textcolor{comment}{//Draw Elements}}
\DoxyCodeLine{123             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}} == 0)}
\DoxyCodeLine{124             \{}
\DoxyCodeLine{125                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}} = 1;}
\DoxyCodeLine{126             \}}
\DoxyCodeLine{127             glDrawElementsInstanced(\mbox{\hyperlink{class_s_g_render_1_1_renderer_ac864edf665d66f9326d0b94888802410}{m\_PrimitiveType}}, \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}}.\mbox{\hyperlink{class_s_g_render_1_1_index_buffer_aa404fdc7a3320c9f7ef58c6c7667312e}{GetCount}}(), GL\_UNSIGNED\_INT, \textcolor{keyword}{nullptr}, \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}});}
\DoxyCodeLine{128             glBindVertexArray(0);}
\DoxyCodeLine{129             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a065c98f308caa87a62e5bb3ebf1ec64e}{m\_FirstInstance}} = \textcolor{keyword}{true};}
\DoxyCodeLine{130         \}}
\DoxyCodeLine{131 }
\DoxyCodeLine{135         \mbox{\hyperlink{class_s_g_render_1_1_camera}{Camera}}* \mbox{\hyperlink{class_s_g_render_1_1_renderer_abd7b70c7842cf54f71ca63eecbab8dce}{camera}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{136 }
\DoxyCodeLine{140         glm::mat4 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a900de03e2e775d2b16a0f6f258789024}{modelMatrix}} = glm::mat4(1.0f);}
\DoxyCodeLine{141 }
\DoxyCodeLine{145         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a28b051826c2d48acacad9785bab38551}{bufferVideoData}}()}
\DoxyCodeLine{146         \{}
\DoxyCodeLine{147             \textcolor{comment}{//Then create buffer with space for that many floats}}
\DoxyCodeLine{148             std::vector<float> vertices; std::vector<unsigned int> indices;     \textcolor{comment}{//Buffer declaration}}
\DoxyCodeLine{149             vertices.resize(\mbox{\hyperlink{class_s_g_render_1_1_renderer_a5e8f39513492c56368bbdc7801442906}{m\_VertSize}}); indices.resize(\mbox{\hyperlink{class_s_g_render_1_1_renderer_acb2d50d9dfff70155e03a9ed31a4ccd0}{m\_IndSize}});              \textcolor{comment}{//Buffer resizing}}
\DoxyCodeLine{150             \textcolor{keyword}{auto} verticesIterator = vertices.begin(); \textcolor{keyword}{auto} indicesIterator = indices.begin();}
\DoxyCodeLine{151 }
\DoxyCodeLine{152             \textcolor{comment}{//Indexes}}
\DoxyCodeLine{153             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertIndex = 0; \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} indIndex = 0;}
\DoxyCodeLine{154             \textcolor{keywordtype}{int} indiceSizeIndex = 0;}
\DoxyCodeLine{155             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} largestInd = 0;}
\DoxyCodeLine{156 }
\DoxyCodeLine{157             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}}; i++) }
\DoxyCodeLine{158             \{}
\DoxyCodeLine{159                 \textcolor{comment}{//Get instructions from render queue}}
\DoxyCodeLine{160                 \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info}{RenderInfo}} instructions = \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}[i];}
\DoxyCodeLine{161 }
\DoxyCodeLine{162                 \textcolor{comment}{//VERTICES}}
\DoxyCodeLine{163                 \textcolor{keyword}{const} \textcolor{keywordtype}{float}* dataPointer = (\textcolor{keyword}{const} \textcolor{keywordtype}{float}*)instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_ae2ea76725d2154c4feab1df2409bebf7}{verts}};}
\DoxyCodeLine{164                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dataSize = instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a6f85e41aafd00ccae71ec69e6bbc6d79}{vertFloats}};}
\DoxyCodeLine{165 }
\DoxyCodeLine{166                 \textcolor{comment}{//Copy vertices into vector     }}
\DoxyCodeLine{167                 std::copy(\&dataPointer[0], \&dataPointer[dataSize], verticesIterator + vertIndex);}
\DoxyCodeLine{168                 vertIndex += dataSize;}
\DoxyCodeLine{169 }
\DoxyCodeLine{170                 \textcolor{comment}{//INDICES}}
\DoxyCodeLine{171                 \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* indDataPointer = instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a87cb6e2da6bf01b21d37a86ae6f931ce}{inds}};}
\DoxyCodeLine{172                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} indDataSize = instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a912ba9ffd00d9773720cdf58fff38ec5}{indCount}};}
\DoxyCodeLine{173                 }
\DoxyCodeLine{174                 \textcolor{comment}{//Add to vector one by one}}
\DoxyCodeLine{175                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} currentLargest = 0;}
\DoxyCodeLine{176                 \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} j = 0; j < indDataSize; j++) \{}
\DoxyCodeLine{177                     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} newValue = indDataPointer[j] + largestInd;}
\DoxyCodeLine{178                     indices[indIndex] = newValue + indiceSizeIndex;}
\DoxyCodeLine{179                     indIndex++;}
\DoxyCodeLine{180                     \textcolor{keywordflow}{if} (newValue > currentLargest) \{}
\DoxyCodeLine{181                         currentLargest = newValue;}
\DoxyCodeLine{182                     \}}
\DoxyCodeLine{183                 \}}
\DoxyCodeLine{184                 largestInd = currentLargest;}
\DoxyCodeLine{185 }
\DoxyCodeLine{186                 indiceSizeIndex++;}
\DoxyCodeLine{187 }
\DoxyCodeLine{188             \}}
\DoxyCodeLine{189             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4bf8423d598df18a1fbe30afdc5edd66}{m\_VB}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_ae69ad7ad5b8a0c95206b71b20527b7a0}{bufferData}}(vertices.data(), vertices.size());}
\DoxyCodeLine{190             \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}}.\mbox{\hyperlink{class_s_g_render_1_1_index_buffer_a01ca2aeb04e5ade46687602c40cf4d83}{bufferData}}(indices.data(), indices.size());}
\DoxyCodeLine{191 }
\DoxyCodeLine{192             \textcolor{comment}{//Keep array to correct size}}
\DoxyCodeLine{193             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}} < \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}.size())}
\DoxyCodeLine{194             \{}
\DoxyCodeLine{195                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}}.shrinkTo(\mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}});}
\DoxyCodeLine{196             \}}
\DoxyCodeLine{197             \mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}} = 0;}
\DoxyCodeLine{198             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a5e8f39513492c56368bbdc7801442906}{m\_VertSize}} = 0; \mbox{\hyperlink{class_s_g_render_1_1_renderer_acb2d50d9dfff70155e03a9ed31a4ccd0}{m\_IndSize}} = 0;}
\DoxyCodeLine{199             \textcolor{comment}{//Return if is non instanced}}
\DoxyCodeLine{200             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} <= 0)}
\DoxyCodeLine{201             \{}
\DoxyCodeLine{202                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} = 0;}
\DoxyCodeLine{203                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a1e74bb9d7997519388c22153fc750c1c}{m\_InstanceSize}} = 0;}
\DoxyCodeLine{204                 \textcolor{keywordflow}{return};}
\DoxyCodeLine{205             \}}
\DoxyCodeLine{206 }
\DoxyCodeLine{207             \textcolor{comment}{//Buffer any instance data}}
\DoxyCodeLine{208             std::vector<float> instances;}
\DoxyCodeLine{209             instances.resize(\mbox{\hyperlink{class_s_g_render_1_1_renderer_a1e74bb9d7997519388c22153fc750c1c}{m\_InstanceSize}});}
\DoxyCodeLine{210             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} instanceIndex = 0;}
\DoxyCodeLine{211             \textcolor{keyword}{auto} instanceIterator = instances.begin();}
\DoxyCodeLine{212             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < \mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}}; i++)}
\DoxyCodeLine{213             \{}
\DoxyCodeLine{214                 \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info}{InstanceInfo}} instructions = \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}[i];}
\DoxyCodeLine{215 }
\DoxyCodeLine{216                 \textcolor{comment}{//INSTANCES}}
\DoxyCodeLine{217                 \textcolor{keyword}{const} \textcolor{keywordtype}{float}* dataPointer = (\textcolor{keyword}{const} \textcolor{keywordtype}{float}*)instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_aaacd5922d1f1bf36d20ef5d903f57b84}{verts}};}
\DoxyCodeLine{218                 \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} dataSize = instructions.\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_a3b948f201b64d57951151c6b8c4004b7}{vertFloats}};}
\DoxyCodeLine{219                 \textcolor{comment}{//Copy data into vector}}
\DoxyCodeLine{220                 std::copy(\&dataPointer[0], \&dataPointer[dataSize], instanceIterator + instanceIndex);}
\DoxyCodeLine{221                 instanceIndex += dataSize;}
\DoxyCodeLine{222             \}}
\DoxyCodeLine{223             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a6efe7566c6d6067c9be4d778b10ab8de}{m\_VBInstances}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_ae69ad7ad5b8a0c95206b71b20527b7a0}{bufferData}}(instances.data(), instances.size());}
\DoxyCodeLine{224             \textcolor{comment}{//Keep array to correct size}}
\DoxyCodeLine{225             \textcolor{keywordflow}{if} (\mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} < \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}.size())}
\DoxyCodeLine{226             \{}
\DoxyCodeLine{227                 \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}}.shrinkTo(\mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}});}
\DoxyCodeLine{228             \}}
\DoxyCodeLine{229             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} = 0;}
\DoxyCodeLine{230             \mbox{\hyperlink{class_s_g_render_1_1_renderer_a1e74bb9d7997519388c22153fc750c1c}{m\_InstanceSize}} = 0;}
\DoxyCodeLine{231         \}}
\DoxyCodeLine{232 }
\DoxyCodeLine{233     \textcolor{keyword}{protected}:}
\DoxyCodeLine{234         \textcolor{comment}{//Helper functions -\/ TODO -\/ use thread pooling so separate renderers collect data in parallel}}
\DoxyCodeLine{235         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a5b6c901838d899ccb351716e31af0871}{bindAll}}() \{ \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}}.\mbox{\hyperlink{class_s_g_render_1_1_vertex_array_a501ca9ef32a79a9213b3e29c56be7496}{bind}}();    \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}}.\mbox{\hyperlink{class_s_g_render_1_1_index_buffer_a970afe85075590cc671c2dd7b0cd33c3}{bind}}(); \}}
\DoxyCodeLine{236 }
\DoxyCodeLine{237         \textcolor{comment}{//type of primitive being drawn}}
\DoxyCodeLine{238         GLenum \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac864edf665d66f9326d0b94888802410}{m\_PrimitiveType}} = GL\_TRIANGLES;}
\DoxyCodeLine{239 }
\DoxyCodeLine{240         \textcolor{comment}{//GL Objects for rendering -\/ used once per draw call}}
\DoxyCodeLine{241         \mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer}{VertexBuffer}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4bf8423d598df18a1fbe30afdc5edd66}{m\_VB}};}
\DoxyCodeLine{242         \mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer}{VertexBuffer}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a6efe7566c6d6067c9be4d778b10ab8de}{m\_VBInstances}};}
\DoxyCodeLine{243         \mbox{\hyperlink{class_s_g_render_1_1_index_buffer}{IndexBuffer}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_ac81a362dff03c78a76a62f2beb963ea0}{m\_IB}};}
\DoxyCodeLine{244         \mbox{\hyperlink{class_s_g_render_1_1_vertex_array}{VertexArray}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a2777f63e8387b678bbcf8de428ca6ae7}{m\_VA}};}
\DoxyCodeLine{245         \mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout}{VertexBufferLayout}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4a5f2d7fbabf6db99967cc8511ac7a1a}{m\_VBL}};}
\DoxyCodeLine{246         \mbox{\hyperlink{class_s_g_render_1_1_vertex_buffer_layout}{VertexBufferLayout}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4450b6ecaabad7d6c87c98bbc31825fd}{m\_VBLInstances}};}
\DoxyCodeLine{247         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a703e04c4c278ba613f5d8ea3970be612}{m\_VertBuffWidth}} = 0;}
\DoxyCodeLine{248         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_aa7f15fdb980cf57f2b9a5b379cacfc6f}{m\_InstBuffWidth}} = 0;}
\DoxyCodeLine{249 }
\DoxyCodeLine{250         \textcolor{comment}{//Queue for rendering}}
\DoxyCodeLine{251         \textcolor{keyword}{struct }\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info}{RenderInfo}}}
\DoxyCodeLine{252         \{}
\DoxyCodeLine{253             \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a5150b6497de826144deef893022a0380}{RenderInfo}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{254             \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a46013186e212bad132a19e549ba3de38}{RenderInfo}}(\textcolor{keywordtype}{void}* v, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vF, \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* i, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{short} \textcolor{keywordtype}{int} iC) : \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_ae2ea76725d2154c4feab1df2409bebf7}{verts}}(v), \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a6f85e41aafd00ccae71ec69e6bbc6d79}{vertFloats}}(vF), \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a87cb6e2da6bf01b21d37a86ae6f931ce}{inds}}(i), \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a912ba9ffd00d9773720cdf58fff38ec5}{indCount}}(iC) \{\}}
\DoxyCodeLine{255             \textcolor{keywordtype}{void}* \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_ae2ea76725d2154c4feab1df2409bebf7}{verts}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{256             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a6f85e41aafd00ccae71ec69e6bbc6d79}{vertFloats}} = 0;}
\DoxyCodeLine{257             \textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int}* \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a87cb6e2da6bf01b21d37a86ae6f931ce}{inds}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{258             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_render_info_a912ba9ffd00d9773720cdf58fff38ec5}{indCount}} = 0;}
\DoxyCodeLine{259         \};}
\DoxyCodeLine{260 }
\DoxyCodeLine{261         \textcolor{keyword}{struct }\mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info}{InstanceInfo}}}
\DoxyCodeLine{262         \{}
\DoxyCodeLine{263             \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_ac57a906aaabf431ef1a89ed5b50bb6b1}{InstanceInfo}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{264             \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_afd35f079147aac521254539831da77a2}{InstanceInfo}}(\textcolor{keywordtype}{void}* v, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vF) : \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_aaacd5922d1f1bf36d20ef5d903f57b84}{verts}}(v), \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_a3b948f201b64d57951151c6b8c4004b7}{vertFloats}}(vF) \{\}}
\DoxyCodeLine{265             \textcolor{keywordtype}{void}* \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_aaacd5922d1f1bf36d20ef5d903f57b84}{verts}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{266             \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_s_g_render_1_1_renderer_1_1_instance_info_a3b948f201b64d57951151c6b8c4004b7}{vertFloats}} = 0;}
\DoxyCodeLine{267         \};}
\DoxyCodeLine{268 }
\DoxyCodeLine{269         \mbox{\hyperlink{class_seg_array}{SegArray<RenderInfo, 96>}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a77b443192dbaecffa5fed3d3ffaf5dc8}{m\_RenderInstructions}};}
\DoxyCodeLine{270         \mbox{\hyperlink{class_seg_array}{SegArray<InstanceInfo, 96>}} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a543f9d15ca8ca843d4b2dc1a0034ca59}{m\_InstanceInstructions}};}
\DoxyCodeLine{271         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a5e8f39513492c56368bbdc7801442906}{m\_VertSize}} = 0;}
\DoxyCodeLine{272         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_acb2d50d9dfff70155e03a9ed31a4ccd0}{m\_IndSize}} = 0;}
\DoxyCodeLine{273         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a1e74bb9d7997519388c22153fc750c1c}{m\_InstanceSize}} = 0;}
\DoxyCodeLine{274         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_af414eed291ad94372f6690289354e955}{m\_VerticesIndex}} = 0;}
\DoxyCodeLine{275         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a324f18822e612d42378e5597c32b2897}{m\_InstanceIndex}} = 0;}
\DoxyCodeLine{276         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a4d690fffa3aeef3b2351a2fb816441d2}{m\_InstanceCount}} = 0;}
\DoxyCodeLine{277         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_s_g_render_1_1_renderer_a065c98f308caa87a62e5bb3ebf1ec64e}{m\_FirstInstance}} = \textcolor{keyword}{true};}
\DoxyCodeLine{278     \};}
\DoxyCodeLine{279 \}}
\DoxyCodeLine{280 }
\DoxyCodeLine{281 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
