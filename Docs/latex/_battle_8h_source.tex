\hypertarget{_battle_8h_source}{}\doxysection{Battle.\+h}
\label{_battle_8h_source}\index{D:/Repositories/Space Engine/SpaceGame/include/game/states/Battle.h@{D:/Repositories/Space Engine/SpaceGame/include/game/states/Battle.h}}
\mbox{\hyperlink{_battle_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef BATTLE\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define BATTLE\_H}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}GL/glew.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_state_8hpp}{core/State.hpp}}"{}}}
\DoxyCodeLine{7 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_obj_management_8h}{core/ObjManagement.h}}"{}}}
\DoxyCodeLine{8 }
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_g_u_i_8h}{game/gui/GUI.h}}"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_battle_g_u_i_8h}{game/gui/BattleGUI.h}}"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_state_renderers_8h}{game/states/StateRenderers.h}}"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_pokemon_battle_8h}{game/pokemon/PokemonBattle.h}}"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_pokemon_i_o_8h}{game/pokemon/PokemonIO.h}}"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_pokemon_level_8h}{game/pokemon/PokemonLevel.h}}"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_sprite_animation_8hpp}{game/objects/SpriteAnimation.hpp}}"{}}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_player_data_8hpp}{game/data/PlayerData.hpp}}"{}}}
\DoxyCodeLine{18 }
\DoxyCodeLine{19 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_flags_8hpp}{game/utility/Flags.hpp}}"{}}}
\DoxyCodeLine{20 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_input_8hpp}{game/utility/Input.hpp}}"{}}}
\DoxyCodeLine{21 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_image_read_8h}{game/utility/ImageRead.h}}"{}}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{\#include "{}mtlib/ThreadPool.h"{}}}
\DoxyCodeLine{24 }
\DoxyCodeLine{25 \textcolor{keyword}{class }\mbox{\hyperlink{class_battle_scene}{BattleScene}}}
\DoxyCodeLine{26 \{}
\DoxyCodeLine{27 \textcolor{keyword}{public}:}
\DoxyCodeLine{28     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_ab51b3d26cd33a1ac3fc60b88c74f07ee}{init}}(\textcolor{keywordtype}{float} width, \textcolor{keywordtype}{float} height);}
\DoxyCodeLine{29     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_ae5e3f30bf82bb515ca3be1afb4b05f8a}{render}}(\mbox{\hyperlink{class_state_render_1_1_battle}{StateRender::Battle}}\& ren);}
\DoxyCodeLine{30     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_a0ca5bf6b20ff45ac120078e8921304ff}{setPokemonA}}(std::string name);}
\DoxyCodeLine{31     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_aa74527c617fd37678fb74c0ebe417865}{buildPlatformA}}();}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_aa97b931372513d9cff457cc209640671}{buildPlatformB}}();}
\DoxyCodeLine{33     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_a65d6cb64d555caab7d68512b4b6f172f}{setPokemonB}}(std::string name);}
\DoxyCodeLine{34     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_scene_a5c93cb2d3d083d0ccd48a712ab9cab46}{update}}(\textcolor{keywordtype}{double} deltaTime);}
\DoxyCodeLine{35 \textcolor{keyword}{private}:}
\DoxyCodeLine{36     \textcolor{keywordtype}{int} m\_Width = 0; \textcolor{keywordtype}{int} m\_Height = 0;}
\DoxyCodeLine{37     \textcolor{keywordtype}{float} m\_SpriteWidth = 0.0f;}
\DoxyCodeLine{38 }
\DoxyCodeLine{39     \textcolor{comment}{//Platforms}}
\DoxyCodeLine{40     \textcolor{keyword}{struct }PlatformData}
\DoxyCodeLine{41     \{}
\DoxyCodeLine{42         \textcolor{keywordtype}{float} depth = 1.0f;}
\DoxyCodeLine{43         \textcolor{keywordtype}{float} elevation = 1.0f;}
\DoxyCodeLine{44         \textcolor{keywordtype}{float} offset = 1.0f;}
\DoxyCodeLine{45     \};}
\DoxyCodeLine{46     \mbox{\hyperlink{_geometry_8h_ae5ee5dfa8be788fe5a303f9a73f26fdb}{Tex\_Quad}} platform1; \mbox{\hyperlink{_geometry_8h_ae5ee5dfa8be788fe5a303f9a73f26fdb}{Tex\_Quad}} platform2;}
\DoxyCodeLine{47     PlatformData platform1Data; PlatformData platform2Data;}
\DoxyCodeLine{48 }
\DoxyCodeLine{49     \mbox{\hyperlink{_geometry_8h_ae5ee5dfa8be788fe5a303f9a73f26fdb}{Tex\_Quad}} background;}
\DoxyCodeLine{50     \mbox{\hyperlink{_geometry_8h_ae5ee5dfa8be788fe5a303f9a73f26fdb}{Tex\_Quad}} pokemonA;}
\DoxyCodeLine{51     \mbox{\hyperlink{_geometry_8h_ae5ee5dfa8be788fe5a303f9a73f26fdb}{Tex\_Quad}} pokemonB;}
\DoxyCodeLine{52     \mbox{\hyperlink{class_sprite_anim}{SpriteAnim<SGRender::TVertex, Tex\_Quad>}} pokemonAAnim;}
\DoxyCodeLine{53     \mbox{\hyperlink{class_sprite_anim}{SpriteAnim<SGRender::TVertex, Tex\_Quad>}} pokemonBAnim;}
\DoxyCodeLine{54     \textcolor{keywordtype}{bool} active = \textcolor{keyword}{true};}
\DoxyCodeLine{55 \};}
\DoxyCodeLine{56 }
\DoxyCodeLine{57 \textcolor{keyword}{class }\mbox{\hyperlink{class_battle}{Battle}} : \textcolor{keyword}{public} \mbox{\hyperlink{class_s_g_1_1_state}{SG::State}}}
\DoxyCodeLine{58 \{}
\DoxyCodeLine{59 \textcolor{keyword}{public}:}
\DoxyCodeLine{60     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a64e2eb7633ecce9e7979113d45013dc3}{init}}(}
\DoxyCodeLine{61         \textcolor{keywordtype}{int} width, }
\DoxyCodeLine{62         \textcolor{keywordtype}{int} height, }
\DoxyCodeLine{63         \mbox{\hyperlink{struct_player_data}{PlayerData}}* data, }
\DoxyCodeLine{64         \mbox{\hyperlink{class_font_container}{FontContainer}}* fonts, }
\DoxyCodeLine{65         \mbox{\hyperlink{_flags_8hpp_a2ea50194cb3de89e680735d7ea665e99}{FlagArray}}* flags, }
\DoxyCodeLine{66         \mbox{\hyperlink{class_game_input}{GameInput}}* input}
\DoxyCodeLine{67     );}
\DoxyCodeLine{68     }
\DoxyCodeLine{69     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a020b99c347db93451e5be5c629bb1e45}{setOverworldFunction}}(std::function<\textcolor{keywordtype}{void}(\textcolor{keywordtype}{bool})> overworld);}
\DoxyCodeLine{70     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a07b1a376a38b4ad1fd714831a035ef13}{update}}(\textcolor{keywordtype}{double} deltaTime, \textcolor{keywordtype}{double} time);}
\DoxyCodeLine{71     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_afabf6721d35b435d7b9751cf76517eb6}{render}}();}
\DoxyCodeLine{72     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_ac82e357437842a45ac1e051a19c31c14}{loadRequiredData}}();}
\DoxyCodeLine{73     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_aa02801982a2ae3515a45f4e601acee72}{purgeRequiredData}}();}
\DoxyCodeLine{74     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a71a4cf6aae6122dd214d53875c4749d4}{handleInput}}(\textcolor{keywordtype}{int} key, \textcolor{keywordtype}{int} scancode, \textcolor{keywordtype}{int} action, \textcolor{keywordtype}{int} mods);}
\DoxyCodeLine{75     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a105d1bfc247c08c0f93b534c97c0b51c}{startBattle}}(\mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* partyA, \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* partyB);}
\DoxyCodeLine{76 }
\DoxyCodeLine{77     \textcolor{comment}{//Set pokemon sprite in a given slot}}
\DoxyCodeLine{78     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a396dad720dd4500c05d319de38f34361}{setPokemonA}}(uint16\_t \textcolor{keywordtype}{id});}
\DoxyCodeLine{79     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_battle_a2474a8286a8584db369bb00cbc10b86d}{setPokemonB}}(uint16\_t \textcolor{keywordtype}{id});}
\DoxyCodeLine{80 \textcolor{keyword}{private}:}
\DoxyCodeLine{81 }
\DoxyCodeLine{82     \textcolor{comment}{//Rendering}}
\DoxyCodeLine{83     \mbox{\hyperlink{class_state_render_1_1_battle}{StateRender::Battle}} m\_Renderer;}
\DoxyCodeLine{84     \textcolor{keywordtype}{int} m\_Width; \textcolor{keywordtype}{int} m\_Height;}
\DoxyCodeLine{85 }
\DoxyCodeLine{86     \textcolor{comment}{//Font}}
\DoxyCodeLine{87     \mbox{\hyperlink{class_font_container}{FontContainer}}* m\_Fonts;}
\DoxyCodeLine{88 }
\DoxyCodeLine{89     \textcolor{comment}{//Flags}}
\DoxyCodeLine{90     \mbox{\hyperlink{_flags_8hpp_a2ea50194cb3de89e680735d7ea665e99}{FlagArray}}* m\_Flags;}
\DoxyCodeLine{91 }
\DoxyCodeLine{92     \textcolor{comment}{//Input}}
\DoxyCodeLine{93     \mbox{\hyperlink{class_game_input}{GameInput}}* m\_Input;}
\DoxyCodeLine{94 }
\DoxyCodeLine{95     \textcolor{comment}{//Data}}
\DoxyCodeLine{96     \mbox{\hyperlink{struct_player_data}{PlayerData}}* m\_Data;}
\DoxyCodeLine{97 }
\DoxyCodeLine{98     \textcolor{comment}{//Battle}}
\DoxyCodeLine{99     std::shared\_ptr<PokemonBattle> m\_Battle;}
\DoxyCodeLine{100     \mbox{\hyperlink{class_battle_scene}{BattleScene}} m\_Scene;}
\DoxyCodeLine{101     \mbox{\hyperlink{class_game_g_u_i_1_1_g_u_i_container}{GameGUI::GUIContainer}} m\_HUD;}
\DoxyCodeLine{102     std::shared\_ptr<BattleGUI> m\_GUI;}
\DoxyCodeLine{103 }
\DoxyCodeLine{104     \textcolor{keywordtype}{bool} m\_MoveTriggers[4] = \{ \textcolor{keyword}{false},\textcolor{keyword}{false},\textcolor{keyword}{false},\textcolor{keyword}{false} \};}
\DoxyCodeLine{105     \textcolor{keywordtype}{bool} m\_Exit = \textcolor{keyword}{false};}
\DoxyCodeLine{106     \textcolor{keywordtype}{bool} m\_ChangePkm = \textcolor{keyword}{false};}
\DoxyCodeLine{107     \mbox{\hyperlink{_pokemon_8h_ad2356a66d6868851b4e5138fe917e8eb}{MoveSlot}} selectedMove = MoveSlot::SLOT\_NULL;}
\DoxyCodeLine{108 }
\DoxyCodeLine{109     \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* m\_PlayerParty;}
\DoxyCodeLine{110     \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* m\_EnemyParty;}
\DoxyCodeLine{111 }
\DoxyCodeLine{112     \textcolor{keywordtype}{void} endBattle();}
\DoxyCodeLine{113 }
\DoxyCodeLine{114     std::function<void(\textcolor{keywordtype}{bool})> m\_OverworldEnable;}
\DoxyCodeLine{115 }
\DoxyCodeLine{116     \textcolor{comment}{//Thread pool for keeping battle separate}}
\DoxyCodeLine{117     MtLib::ThreadPool* m\_Pool;}
\DoxyCodeLine{118 \};}
\DoxyCodeLine{119 }
\DoxyCodeLine{120 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
