\hypertarget{_texture_8h_source}{}\doxysection{Texture.\+h}
\label{_texture_8h_source}\index{D:/Repositories/Space Engine/SpaceGame/include/renderer/Texture.h@{D:/Repositories/Space Engine/SpaceGame/include/renderer/Texture.h}}
\mbox{\hyperlink{_texture_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 }
\DoxyCodeLine{3 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_g_l_classes_8h}{GLClasses.h}}"{}}}
\DoxyCodeLine{4 \textcolor{preprocessor}{\#include "{}stb/stb\_image.h"{}}}
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}stb/stb\_image\_write.h"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_vertex_8hpp}{renderer/Vertex.hpp}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{keyword}{class }\mbox{\hyperlink{class_texture}{Texture}}}
\DoxyCodeLine{9 \{}
\DoxyCodeLine{10 \textcolor{keyword}{public}:}
\DoxyCodeLine{11     \mbox{\hyperlink{class_texture_a6c275e3f186675ff6ed73ccf970e552f}{Texture}}() : m\_ID(0), m\_FilePath(\textcolor{stringliteral}{"{}res/debug.png"{}}), m\_LocalBuffer(nullptr), m\_Width(0), m\_Height(0), m\_BPP(0) \{\};}
\DoxyCodeLine{12     \mbox{\hyperlink{class_texture_a09c4bcb7462f64c1d20fa69dba3cee8a}{\string~Texture}}();}
\DoxyCodeLine{13 }
\DoxyCodeLine{14     \textcolor{comment}{//Load texture into buffer from file path}}
\DoxyCodeLine{15     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a7659601a590289cfc4fa514b43c9d863}{loadTexture}}(\textcolor{keyword}{const} std::string\& path);}
\DoxyCodeLine{16     \textcolor{keyword}{inline} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_ae035153daf6a48f540689032bbac10b1}{loadTexture}}(\textcolor{keyword}{const} std::string\& path, \textcolor{keywordtype}{bool} flip);}
\DoxyCodeLine{17     \textcolor{comment}{//Generate texture into slot}}
\DoxyCodeLine{18     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a36fc75adf969a7f743e763082e834fdd}{generateTexture}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} slot);}
\DoxyCodeLine{19     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a7ea9faa5510ec1bdbfcc137bdab96d63}{generateTexture}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} slot, \textcolor{keywordtype}{void}* buffer);}
\DoxyCodeLine{20     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_aaccc2d5e334fe36fe2f86b26b8e4b59a}{generateTextureWrap}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} slot, \textcolor{keywordtype}{void}* buffer); \textcolor{comment}{//TODO have 1 func}}
\DoxyCodeLine{21     \textcolor{comment}{//Bind and Unbind texture}}
\DoxyCodeLine{22     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a4b85391c6e54686ec566ba38c62dde98}{bind}}() \textcolor{keyword}{const};}
\DoxyCodeLine{23     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a451d7afac3848417bb1007d39ee7d545}{unbind}}() \textcolor{keyword}{const};}
\DoxyCodeLine{24     \textcolor{comment}{//Clear buffer image data is loaded into}}
\DoxyCodeLine{25     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a4a39e6e4677788c79aadef7913c422e0}{clearBuffer}}();}
\DoxyCodeLine{26     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a94f65b068844b698b4f1eda346450824}{deleteTexture}}()\textcolor{keyword}{ const }\{ glDeleteTextures(1, \&m\_ID); \}}
\DoxyCodeLine{27 }
\DoxyCodeLine{28     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_texture_a0e9ed256fb6ec91588d2bbd30e26f937}{getID}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_ID; \}}
\DoxyCodeLine{29 }
\DoxyCodeLine{30     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a52ea6825bd24b11875a37f0715e7b883}{setWidth}}(\textcolor{keywordtype}{int} \mbox{\hyperlink{class_texture_a944933dbc1980fb01e7d23b08b97280a}{width}}) \{ m\_Width = \mbox{\hyperlink{class_texture_a944933dbc1980fb01e7d23b08b97280a}{width}}; \}}
\DoxyCodeLine{31     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a1945ff1d8c22a3760dadada8b95d065d}{setHeight}}(\textcolor{keywordtype}{int} \mbox{\hyperlink{class_texture_a280f6b36ebf824ff1b5ceb2222988969}{height}}) \{ m\_Height = \mbox{\hyperlink{class_texture_a280f6b36ebf824ff1b5ceb2222988969}{height}}; \}}
\DoxyCodeLine{32     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_texture_a9773706f212ca3971a6daa718fcb0e2e}{setBPP}}(\textcolor{keywordtype}{int} bpp) \{ m\_BPP = bpp; \}}
\DoxyCodeLine{33     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_texture_a944933dbc1980fb01e7d23b08b97280a}{width}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_Width; \}}
\DoxyCodeLine{34     \textcolor{keywordtype}{int} \mbox{\hyperlink{class_texture_a280f6b36ebf824ff1b5ceb2222988969}{height}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_Height; \}}
\DoxyCodeLine{35 }
\DoxyCodeLine{36 \textcolor{keyword}{private}:}
\DoxyCodeLine{37     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_ID; \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_Slot = 0;}
\DoxyCodeLine{38     std::string m\_FilePath;}
\DoxyCodeLine{39     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char}* m\_LocalBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{40     \textcolor{keywordtype}{int} m\_Width, m\_Height, m\_BPP;}
\DoxyCodeLine{41 }
\DoxyCodeLine{42 \};}
\DoxyCodeLine{43 }
\DoxyCodeLine{44 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespace_tex}{Tex}}}
\DoxyCodeLine{45 \{}
\DoxyCodeLine{46     \textcolor{keyword}{struct }\textcolor{keyword}{alignas}(1) \mbox{\hyperlink{struct_tex_1_1_tex_channel__4}{TexChannel\_4}}}
\DoxyCodeLine{47     \{}
\DoxyCodeLine{48         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__4_a5f06b24f25fa2ed087495c30f5f7ee28}{r}};}
\DoxyCodeLine{49         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__4_a387539b382d2b9ccf3d47769c43d08bc}{g}};}
\DoxyCodeLine{50         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__4_a61124807beea9c3bd9aa2e8552ab7939}{b}};}
\DoxyCodeLine{51         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__4_a7694c209de36fb28d13b64ef281b879c}{a}};}
\DoxyCodeLine{52     \};}
\DoxyCodeLine{53 }
\DoxyCodeLine{54     \textcolor{keyword}{struct }\textcolor{keyword}{alignas}(1) \mbox{\hyperlink{struct_tex_1_1_tex_channel__3}{TexChannel\_3}}}
\DoxyCodeLine{55     \{}
\DoxyCodeLine{56         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__3_a0d2a05e636c5478d7a0d42c718a57daa}{r}};}
\DoxyCodeLine{57         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__3_afadcc3674b2b4d2e6cff8c84d92d466a}{g}};}
\DoxyCodeLine{58         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{struct_tex_1_1_tex_channel__3_a9207abf6da7cd4337cef74deed7dad4f}{b}};}
\DoxyCodeLine{59     \};}
\DoxyCodeLine{60 }
\DoxyCodeLine{61     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_tex_1_1_tex_buffer}{TexBuffer}}}
\DoxyCodeLine{62     \{}
\DoxyCodeLine{63         \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_tex_1_1_tex_buffer_a462c1db8b9866212e8f1e0169181c981}{width}};}
\DoxyCodeLine{64         \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_tex_1_1_tex_buffer_a992d0a48f8e6a67bc638afbaf93f2a30}{height}};}
\DoxyCodeLine{65         \textcolor{keywordtype}{int} \mbox{\hyperlink{struct_tex_1_1_tex_buffer_aebbefd2238790a02850d5974453c33e9}{bpp}};}
\DoxyCodeLine{66         \mbox{\hyperlink{struct_tex_1_1_tex_channel__4}{TexChannel\_4}}* \mbox{\hyperlink{struct_tex_1_1_tex_buffer_ae9f5716f842e7960eeecfa24c24f0bd0}{buffer}} = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{67         std::string \mbox{\hyperlink{struct_tex_1_1_tex_buffer_a31dbfe0ca3b65d2c4f595b173c2466d1}{name}};}
\DoxyCodeLine{68     \};}
\DoxyCodeLine{69 }
\DoxyCodeLine{70     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_tex_1_1_u_v_transform}{UVTransform}}}
\DoxyCodeLine{71     \{}
\DoxyCodeLine{72         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_tex_1_1_u_v_transform_ac6ffd0d9c30479843c37c0f3641f39b2}{deltaV}};}
\DoxyCodeLine{73         \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_tex_1_1_u_v_transform_a50ce8470bfddedfd9a91c75a9d1a388e}{scaleU}}; \textcolor{keywordtype}{float} \mbox{\hyperlink{struct_tex_1_1_u_v_transform_a88be8dae13ac6bd39df76dd3737bf89a}{scaleV}};}
\DoxyCodeLine{74     \};}
\DoxyCodeLine{75 }
\DoxyCodeLine{76     \textcolor{keyword}{class }\mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a}{TextureAtlasRGBA}}}
\DoxyCodeLine{77     \{}
\DoxyCodeLine{78     \textcolor{keyword}{public}:}
\DoxyCodeLine{79         \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a906b64df75c12183a38670ae586a7583}{TextureAtlasRGBA}}() = \textcolor{keywordflow}{default};}
\DoxyCodeLine{80         \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a70813c2f397b8790471c75778dd268d1}{\string~TextureAtlasRGBA}}() \{ \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a2452c6d0b4271dc77cfb6844bbdb6375}{clearBuffers}}(); \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a305c30e66e60d1a66dc9e7adace03fcf}{deleteTextures}}(); \};}
\DoxyCodeLine{81         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a80e9aa2e3fcb2a44d290a2744a557874}{loadTexture}}(\textcolor{keyword}{const} std::string\& path, \textcolor{keyword}{const} std::string\& name);}
\DoxyCodeLine{82         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a5841cdf9a03048e86fb8664d1687945c}{generateAtlas}}();}
\DoxyCodeLine{83         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a0771b354374055f76242443fd000e00f}{generateTexture}}(\textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} slot);}
\DoxyCodeLine{84         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a2452c6d0b4271dc77cfb6844bbdb6375}{clearBuffers}}();}
\DoxyCodeLine{85         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_ac62475c96ad10bc2a3b9d8a80c11ea4c}{clearTextureBuffers}}();}
\DoxyCodeLine{86         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_ac060e02684226e3d68f7a28b7ea78db8}{clearAtlasBuffers}}();}
\DoxyCodeLine{87         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a305c30e66e60d1a66dc9e7adace03fcf}{deleteTextures}}()\textcolor{keyword}{ const }\{ glDeleteTextures(1, \&m\_ID); \}}
\DoxyCodeLine{88         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a5538de257007cf509623122d831d29c6}{requestNewTextures}}() \{ m\_RequestNewTextures = \textcolor{keyword}{true}; \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a2452c6d0b4271dc77cfb6844bbdb6375}{clearBuffers}}(); \}}
\DoxyCodeLine{89         \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_acf93a00c7dff42d9c4f70515577e2991}{shouldRequestNewTextures}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_RequestNewTextures; \}}
\DoxyCodeLine{90 }
\DoxyCodeLine{91         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a364f0839ea71a99b789cb06f73fc2265}{bind}}()\textcolor{keyword}{ const }\{ glActiveTexture(GL\_TEXTURE0 + m\_Slot); glBindTexture(GL\_TEXTURE\_2D, m\_ID); \}}
\DoxyCodeLine{92         \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_aee1e19416fbd72fd5b60eb2be5ab1390}{unbind}}()\textcolor{keyword}{ const }\{glActiveTexture(GL\_TEXTURE0 + m\_Slot); glBindTexture(GL\_TEXTURE\_2D, 0);\}}
\DoxyCodeLine{93 }
\DoxyCodeLine{94         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a0c3a3abf3ec95478499d506152cffec9}{currentTextureCycle}}() \{ \textcolor{keywordflow}{return} m\_AtlasGenCycle; \}}
\DoxyCodeLine{95 }
\DoxyCodeLine{96         \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{97         \mbox{\hyperlink{struct_tex_1_1_u_v_transform}{UVTransform}} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_af8e5f97313a57ed3191edc28bcf2b474}{mapModelVerts}}(T* vertices, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertCount, std::string texName)}
\DoxyCodeLine{98         \{}
\DoxyCodeLine{99             \textcolor{keyword}{static\_assert}(std::is\_base\_of<SGRender::TVertex, T>::value, \textcolor{stringliteral}{"{}Must be a texture vertex!"{}});}
\DoxyCodeLine{100             }
\DoxyCodeLine{101             \textcolor{keywordflow}{if} (m\_AtlasRequest.find(texName) == m\_AtlasRequest.end())}
\DoxyCodeLine{102             \{}
\DoxyCodeLine{103                 \mbox{\hyperlink{_s_g_util_8h_a2c622e9c0f75f5dcfc0a761f0b9bf481}{EngineLog}}(\textcolor{stringliteral}{"{}Requested texture is not in atlas! "{}}, texName);}
\DoxyCodeLine{104                 \textcolor{keywordflow}{return} \{ 0.0f, 0.0f, 0.0f \};}
\DoxyCodeLine{105             \}}
\DoxyCodeLine{106             \mbox{\hyperlink{struct_tex_1_1_u_v_transform}{UVTransform}} trans = m\_AtlasRequest.at(texName);}
\DoxyCodeLine{107             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < vertCount; i++)}
\DoxyCodeLine{108             \{}
\DoxyCodeLine{109                 vertices[i].uvCoords.x *= trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_a50ce8470bfddedfd9a91c75a9d1a388e}{scaleU}};}
\DoxyCodeLine{110                 vertices[i].uvCoords.y *= trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_a88be8dae13ac6bd39df76dd3737bf89a}{scaleV}};}
\DoxyCodeLine{111                 vertices[i].uvCoords.y += trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_ac6ffd0d9c30479843c37c0f3641f39b2}{deltaV}};}
\DoxyCodeLine{112             \}}
\DoxyCodeLine{113             \textcolor{keywordflow}{return} trans;}
\DoxyCodeLine{114         \}}
\DoxyCodeLine{115 }
\DoxyCodeLine{116         \textcolor{keyword}{template}<\textcolor{keyword}{typename} T>}
\DoxyCodeLine{117         \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_tex_1_1_texture_atlas_r_g_b_a_a19aff6cb9448fcdb4abbf31183d624d0}{unmapModelVerts}}(T* vertices, \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} vertCount, std::string texName, \mbox{\hyperlink{struct_tex_1_1_u_v_transform}{UVTransform}} trans)}
\DoxyCodeLine{118         \{}
\DoxyCodeLine{119             \textcolor{keyword}{static\_assert}(std::is\_base\_of<SGRender::TVertex, T>::value, \textcolor{stringliteral}{"{}Must be a texture vertex!"{}});}
\DoxyCodeLine{120             \textcolor{keywordflow}{for} (\textcolor{keywordtype}{int} i = 0; i < vertCount; i++)}
\DoxyCodeLine{121             \{}
\DoxyCodeLine{122                 vertices[i].uvCoords.y -\/= trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_ac6ffd0d9c30479843c37c0f3641f39b2}{deltaV}};}
\DoxyCodeLine{123                 vertices[i].uvCoords.x /= trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_a50ce8470bfddedfd9a91c75a9d1a388e}{scaleU}};}
\DoxyCodeLine{124                 vertices[i].uvCoords.y /= trans.\mbox{\hyperlink{struct_tex_1_1_u_v_transform_a88be8dae13ac6bd39df76dd3737bf89a}{scaleV}};}
\DoxyCodeLine{125             \}}
\DoxyCodeLine{126         \}}
\DoxyCodeLine{127 }
\DoxyCodeLine{128     \textcolor{keyword}{private}:}
\DoxyCodeLine{129         std::vector<TexBuffer> m\_LocalBuffers;}
\DoxyCodeLine{130         \mbox{\hyperlink{struct_tex_1_1_tex_channel__4}{TexChannel\_4}}* m\_AtlasBuffer = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{131         std::unordered\_map<std::string, UVTransform> m\_AtlasRequest;}
\DoxyCodeLine{132         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_Slot; \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_ID;}
\DoxyCodeLine{133         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_Width; \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_Height;}
\DoxyCodeLine{134         \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{char} m\_AtlasGenCycle = 0; \textcolor{comment}{//Goes up each time a new texture is generated -\/ should let models know to remap}}
\DoxyCodeLine{135         \textcolor{keywordtype}{bool} m\_RequestNewTextures = \textcolor{keyword}{false}; \textcolor{comment}{//Checks whether objects linked to atlas should load their textures again -\/ means only textures in buffer should be textures needed}}
\DoxyCodeLine{136     \};}
\DoxyCodeLine{137 \}}

\end{DoxyCode}
