\hypertarget{_pokemon_battle_8h_source}{}\doxysection{Pokemon\+Battle.\+h}
\label{_pokemon_battle_8h_source}\index{D:/Repositories/Space Engine/SpaceGame/include/game/pokemon/PokemonBattle.h@{D:/Repositories/Space Engine/SpaceGame/include/game/pokemon/PokemonBattle.h}}
\mbox{\hyperlink{_pokemon_battle_8h}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{preprocessor}{\#pragma once}}
\DoxyCodeLine{2 \textcolor{preprocessor}{\#ifndef POKEMON\_BATTLE\_H}}
\DoxyCodeLine{3 \textcolor{preprocessor}{\#define POKEMON\_BATTLE\_H}}
\DoxyCodeLine{4 }
\DoxyCodeLine{5 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_s_g_util_8h}{utility/SGUtil.h}}"{}}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_game_text_8h}{game/utility/GameText.h}}"{}}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_pokemon_8h}{game/pokemon/Pokemon.h}}"{}}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_stat_stages_8hpp}{game/pokemon/StatStages.hpp}}"{}}}
\DoxyCodeLine{10 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_turn_8hpp}{game/pokemon/Turn.hpp}}"{}}}
\DoxyCodeLine{11 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_move_effects_8h}{game/pokemon/MoveEffects.h}}"{}}}
\DoxyCodeLine{12 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_random_8h}{utility/Random.h}}"{}}}
\DoxyCodeLine{13 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_g_u_i_8h}{game/gui/GUI.h}}"{}}}
\DoxyCodeLine{14 \textcolor{preprocessor}{\#include "{}chrono"{}}}
\DoxyCodeLine{15 \textcolor{preprocessor}{\#include "{}functional"{}}}
\DoxyCodeLine{16 }
\DoxyCodeLine{17 \textcolor{preprocessor}{\#define MOVE\_QUEUE\_LENGTH 5}}
\DoxyCodeLine{18 \textcolor{preprocessor}{\#define BATTLE\_PROBABILITY\_MAX 10000}}
\DoxyCodeLine{19 \textcolor{preprocessor}{\#define TYPE\_COUNT 18}}
\DoxyCodeLine{20 }
\DoxyCodeLine{21 \textcolor{comment}{//Type effectiveness lookup for ATTACK -\/ don't need to store defensive info}}
\DoxyCodeLine{22 \textcolor{comment}{//Stored in order the types are stored above and so can be used as keys}}
\DoxyCodeLine{23 \textcolor{comment}{//0 is no effect, 1 is half power, 2 is normal power, 4 is 2x power (value / 2 to get multiplier)}}
\DoxyCodeLine{24 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t FairyEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{25 \{}
\DoxyCodeLine{26     2,1,2,2,2,2,4,1,2,2,2,2,2,2,4,4,1,2}
\DoxyCodeLine{27 \};}
\DoxyCodeLine{28 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t SteelEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{29 \{}
\DoxyCodeLine{30     2,1,1,2,1,4,2,2,2,2,2,2,4,2,2,2,1,4}
\DoxyCodeLine{31 \};}
\DoxyCodeLine{32 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t DragonEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{33 \{}
\DoxyCodeLine{34     2,2,2,2,2,2,2,2,2,2,2,2,2,2,2,4,1,0}
\DoxyCodeLine{35 \};}
\DoxyCodeLine{36 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t DarkEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{37 \{}
\DoxyCodeLine{38     2,2,2,2,2,2,1,2,2,2,4,2,2,4,1,2,2,1}
\DoxyCodeLine{39 \};}
\DoxyCodeLine{40 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t GhostEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{41 \{}
\DoxyCodeLine{42     0,2,2,2,2,2,2,2,2,2,4,2,2,4,1,2,2,2}
\DoxyCodeLine{43 \};}
\DoxyCodeLine{44 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t RockEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{45 \{}
\DoxyCodeLine{46     2,4,2,2,2,4,1,2,1,4,2,4,2,2,2,2,1,2}
\DoxyCodeLine{47 \};}
\DoxyCodeLine{48 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t BugEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{49 \{}
\DoxyCodeLine{50     2,1,2,4,2,2,1,1,2,1,4,2,2,1,4,2,1,1}
\DoxyCodeLine{51 \};}
\DoxyCodeLine{52 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t PsychicEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{53 \{}
\DoxyCodeLine{54     2,2,2,2,2,2,4,4,2,2,1,2,2,2,0,2,1,2}
\DoxyCodeLine{55 \};}
\DoxyCodeLine{56 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t FlyingEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{57 \{}
\DoxyCodeLine{58     2,2,2,4,1,2,4,2,2,2,2,4,1,2,2,2,1,2}
\DoxyCodeLine{59 \};}
\DoxyCodeLine{60 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t GroundEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{61 \{}
\DoxyCodeLine{62     2,4,2,1,4,2,2,4,2,0,2,1,4,2,2,2,4,2}
\DoxyCodeLine{63 \};}
\DoxyCodeLine{64 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t PoisonEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{65 \{}
\DoxyCodeLine{66     2,2,2,4,2,2,2,1,1,2,2,2,1,1,2,2,0,4}
\DoxyCodeLine{67 \};}
\DoxyCodeLine{68 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t FightingEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{69 \{}
\DoxyCodeLine{70     4,2,2,2,2,4,2,1,2,1,1,1,4,0,4,2,4,1}
\DoxyCodeLine{71 \};}
\DoxyCodeLine{72 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t NormalEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{73 \{}
\DoxyCodeLine{74     2,2,2,2,2,2,2,2,2,2,2,2,1,0,2,2,1,1}
\DoxyCodeLine{75 \};}
\DoxyCodeLine{76 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t FireEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{77 \{}
\DoxyCodeLine{78     2,1,1,4,2,4,2,2,2,2,2,4,1,2,2,1,4,2}
\DoxyCodeLine{79 \};}
\DoxyCodeLine{80 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t WaterEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{81 \{}
\DoxyCodeLine{82     2,4,1,1,2,2,2,2,4,2,2,2,4,2,2,1,2,2}
\DoxyCodeLine{83 \};}
\DoxyCodeLine{84 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t GrassEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{85 \{}
\DoxyCodeLine{86     2,1,4,1,2,2,2,1,4,1,2,1,4,2,2,1,1,2}
\DoxyCodeLine{87 \};}
\DoxyCodeLine{88 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t ElectricEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{89 \{}
\DoxyCodeLine{90     2,2,4,1,1,2,2,2,0,4,2,2,2,2,2,1,2,2}
\DoxyCodeLine{91 \};}
\DoxyCodeLine{92 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t IceEff[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{93 \{}
\DoxyCodeLine{94     2,1,1,4,2,1,2,2,4,4,2,2,2,2,2,4,1,1}
\DoxyCodeLine{95 \};}
\DoxyCodeLine{96 }
\DoxyCodeLine{97 \textcolor{keyword}{static} \textcolor{keyword}{const} uint8\_t* TypeLookup[\mbox{\hyperlink{_pokemon_battle_8h_a5aa140c2c2e64a57331d450a98077834}{TYPE\_COUNT}}]}
\DoxyCodeLine{98 \{}
\DoxyCodeLine{99     NormalEff, FireEff, WaterEff, GrassEff, ElectricEff, IceEff, FightingEff, PoisonEff, GroundEff, FlyingEff,}
\DoxyCodeLine{100     PsychicEff, BugEff, RockEff, GhostEff, DarkEff, DragonEff, SteelEff, FairyEff}
\DoxyCodeLine{101 \};}
\DoxyCodeLine{102 }
\DoxyCodeLine{103 \textcolor{keyword}{static} uint8\_t LookupTypeMultiplier(\mbox{\hyperlink{_pokemon_8h_a7bbdcc7c1e33f6f1b89c3df7f6e3d00e}{PokemonType}} attacking, \mbox{\hyperlink{_pokemon_8h_a7bbdcc7c1e33f6f1b89c3df7f6e3d00e}{PokemonType}} defending);}
\DoxyCodeLine{104 \textcolor{keyword}{static} \textcolor{keywordtype}{float} LookupStageMultiplier(\mbox{\hyperlink{_stat_stages_8hpp_afee804b436a181179c2322ffa72e6339}{Stage}} stage);}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{comment}{//Attacking}}
\DoxyCodeLine{107 \textcolor{keyword}{static} \textcolor{keywordtype}{void} ExecuteAttack(\mbox{\hyperlink{struct_turn_data}{TurnData}}\& turn);}
\DoxyCodeLine{108 }
\DoxyCodeLine{109 \textcolor{comment}{//Can use interchangably with attack and sp. attack as is now agnostic}}
\DoxyCodeLine{110 \textcolor{keyword}{static} int16\_t CalculateDamage(}
\DoxyCodeLine{111     int16\_t attackStat, }
\DoxyCodeLine{112     int16\_t defenceStat, }
\DoxyCodeLine{113     \mbox{\hyperlink{struct_pokemon}{Pokemon}}\& attacker, }
\DoxyCodeLine{114     \mbox{\hyperlink{struct_pokemon}{Pokemon}}\& target, }
\DoxyCodeLine{115     \mbox{\hyperlink{struct_turn_move}{TurnMove}} move, }
\DoxyCodeLine{116     \mbox{\hyperlink{_stat_stages_8hpp_afee804b436a181179c2322ffa72e6339}{Stage}} attackStage, }
\DoxyCodeLine{117     \mbox{\hyperlink{_stat_stages_8hpp_afee804b436a181179c2322ffa72e6339}{Stage}} defendStage, }
\DoxyCodeLine{118     \mbox{\hyperlink{_stat_stages_8hpp_afee804b436a181179c2322ffa72e6339}{Stage}} critStage}
\DoxyCodeLine{119 );}
\DoxyCodeLine{120 }
\DoxyCodeLine{121 \textcolor{keyword}{static} \textcolor{keywordtype}{bool} ProcessStatus(\mbox{\hyperlink{struct_pokemon}{Pokemon}}\& pokemon);}
\DoxyCodeLine{122 \textcolor{keyword}{static} \textcolor{keywordtype}{void} ProcessEndTurnStatus(\mbox{\hyperlink{struct_pokemon}{Pokemon}}\& pokemon);}
\DoxyCodeLine{123 }
\DoxyCodeLine{124 \textcolor{comment}{//Queue has a circular stack array of moves so a move can have an effect ahead}}
\DoxyCodeLine{125 \textcolor{keyword}{class }\mbox{\hyperlink{class_move_queue}{MoveQueue}}}
\DoxyCodeLine{126 \{}
\DoxyCodeLine{127 \textcolor{keyword}{public}:}
\DoxyCodeLine{128     \mbox{\hyperlink{class_move_queue_ad4d7970b860c3dc7db8872911b6efc91}{MoveQueue}}() \{ \mbox{\hyperlink{class_move_queue_a4b98c0c10fa672029f811bc79c4f5fe3}{random}}.\mbox{\hyperlink{class_s_g_random_1_1_random_container_a79aa1ed11801db265e25b82961af8688}{seed}}(0.0f, \mbox{\hyperlink{_pokemon_battle_8h_afd1324a981b03318ae9224e1441f1f25}{BATTLE\_PROBABILITY\_MAX}}); \}}
\DoxyCodeLine{129 }
\DoxyCodeLine{130     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_move_queue_aa75324d9c488ee98de1087759fe159c3}{queueMove}}(\mbox{\hyperlink{struct_turn_data}{TurnData}} move, \textcolor{keywordtype}{int} turnsAhead);}
\DoxyCodeLine{131     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_move_queue_a332ce6664a55c404d6a64ee96860e2ac}{linkFaintCheck}}(std::function<\textcolor{keywordtype}{void}(\textcolor{keywordtype}{bool})> func) \{ m\_CheckFaint = func; \}}
\DoxyCodeLine{132     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_move_queue_a899882e6c5791502beeeda1e150c846e}{processTurn}}();}
\DoxyCodeLine{133 }
\DoxyCodeLine{134     \textcolor{keyword}{static} \textcolor{keyword}{const} \textcolor{keywordtype}{int} \mbox{\hyperlink{class_move_queue_a3c449c7c652c1de4190e768a6053a47c}{POKEMON\_COUNT}} = 2;}
\DoxyCodeLine{135     \textcolor{keyword}{struct }\mbox{\hyperlink{struct_move_queue_1_1_turn}{Turn}}}
\DoxyCodeLine{136     \{}
\DoxyCodeLine{137         \mbox{\hyperlink{struct_turn_data}{TurnData}} \mbox{\hyperlink{struct_move_queue_1_1_turn_a0cfa59adb76a709a26c4749c43619fa9}{moves}}[\mbox{\hyperlink{class_move_queue_a3c449c7c652c1de4190e768a6053a47c}{POKEMON\_COUNT}}];}
\DoxyCodeLine{138         uint8\_t \mbox{\hyperlink{struct_move_queue_1_1_turn_ae13fbc7b660540e0d4dc03302bce2547}{size}} = 0;}
\DoxyCodeLine{139     \};}
\DoxyCodeLine{140     \textcolor{keyword}{static} \mbox{\hyperlink{class_s_g_random_1_1_random_container}{SGRandom::RandomContainer}} \mbox{\hyperlink{class_move_queue_a4b98c0c10fa672029f811bc79c4f5fe3}{random}};}
\DoxyCodeLine{141 \textcolor{keyword}{private}:}
\DoxyCodeLine{142     \mbox{\hyperlink{struct_move_queue_1_1_turn}{Turn}} m\_MoveQueue[\mbox{\hyperlink{_pokemon_battle_8h_a01ec68e4f48313272485e5a94a75ccbe}{MOVE\_QUEUE\_LENGTH}}]; \textcolor{comment}{//Array of how many moves to look ahead}}
\DoxyCodeLine{143     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_QueueIndex = 0; \textcolor{comment}{//Rolls around to make queue array circular}}
\DoxyCodeLine{144     std::function<void(\textcolor{keywordtype}{bool})> m\_CheckFaint;}
\DoxyCodeLine{145 \};}
\DoxyCodeLine{146 }
\DoxyCodeLine{147 \textcolor{keyword}{static} \textcolor{keywordtype}{bool} SortBySpeed(\textcolor{keyword}{const} \mbox{\hyperlink{struct_turn_data}{TurnData}}\& lhs, \textcolor{keyword}{const} \mbox{\hyperlink{struct_turn_data}{TurnData}}\& rhs);}
\DoxyCodeLine{148 \textcolor{keyword}{static} \textcolor{keywordtype}{void} QueueMove(}
\DoxyCodeLine{149     \mbox{\hyperlink{class_move_queue}{MoveQueue}}\& queue, }
\DoxyCodeLine{150     \mbox{\hyperlink{struct_pokemon_move}{PokemonMove}} move,}
\DoxyCodeLine{151     \mbox{\hyperlink{struct_pokemon}{Pokemon}}* origin,}
\DoxyCodeLine{152     \mbox{\hyperlink{struct_pokemon}{Pokemon}}* target,}
\DoxyCodeLine{153     \mbox{\hyperlink{struct_current_stages}{CurrentStages}}* originStages,}
\DoxyCodeLine{154     \mbox{\hyperlink{struct_current_stages}{CurrentStages}}* targetStages,}
\DoxyCodeLine{155     \mbox{\hyperlink{_turn_8hpp_ab0ed5a40f5c765a4fb52cfb859bd04f0}{PokemonMoveState}}* originState,}
\DoxyCodeLine{156     \mbox{\hyperlink{_turn_8hpp_ab0ed5a40f5c765a4fb52cfb859bd04f0}{PokemonMoveState}}* targetState}
\DoxyCodeLine{157 );}
\DoxyCodeLine{158 }
\DoxyCodeLine{159 \textcolor{keyword}{class }\mbox{\hyperlink{class_pokemon_battle}{PokemonBattle}}}
\DoxyCodeLine{160 \{}
\DoxyCodeLine{161 \textcolor{keyword}{public}:}
\DoxyCodeLine{162     \mbox{\hyperlink{class_pokemon_battle_add76cb7b123f7c1b9c667ef6469cda0a}{PokemonBattle}}() \{ \mbox{\hyperlink{class_pokemon_battle_a3cdc9d4de14ad6cf167864d34964fc03}{random}}.\mbox{\hyperlink{class_s_g_random_1_1_random_container_a79aa1ed11801db265e25b82961af8688}{seed}}(0.0f, \mbox{\hyperlink{_pokemon_battle_8h_afd1324a981b03318ae9224e1441f1f25}{BATTLE\_PROBABILITY\_MAX}}); m\_MoveQueue.\mbox{\hyperlink{class_move_queue_a332ce6664a55c404d6a64ee96860e2ac}{linkFaintCheck}}(std::bind(\&PokemonBattle::checkFaint, \textcolor{keyword}{this}, std::placeholders::\_1)); \}}
\DoxyCodeLine{163     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_a60e802fa8a7ae0f4585608cc8ee70af8}{linkProgressButtons}}(\textcolor{keywordtype}{bool}* pressE, \textcolor{keywordtype}{bool}* pressX) \{ s\_Progress[0] = pressE; s\_Progress[1] = pressX; \}}
\DoxyCodeLine{164     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_aca884af542f2f4805d54c4e6d15c885b}{linkHealthGui}}(std::function<\textcolor{keywordtype}{void}(\textcolor{keywordtype}{float}, \textcolor{keywordtype}{float})> func);}
\DoxyCodeLine{165 }
\DoxyCodeLine{166     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_a1b796b05339ab67f46d010ef3520772a}{setParties}}(\mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* playerParty, \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* enemyParty) \{ m\_PartyA = playerParty; m\_PartyB = enemyParty; m\_BattleOver = \textcolor{keyword}{false}; \};}
\DoxyCodeLine{167     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_aed9945b8a3dbaeccc3a027701ddf873f}{run}}(\mbox{\hyperlink{_pokemon_8h_ad2356a66d6868851b4e5138fe917e8eb}{MoveSlot}} move);}
\DoxyCodeLine{168     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_a18b5a1093064c3e23c9fff86e8b65cbc}{setActiveA}}(\textcolor{keywordtype}{int} slot) \{ m\_ActivePkmA = slot; \}}
\DoxyCodeLine{169     \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_a89c48064df0d07021deb0f9c80046a9a}{setActiveB}}(\textcolor{keywordtype}{int} slot) \{ m\_ActivePkmB = slot; \}}
\DoxyCodeLine{170 }
\DoxyCodeLine{171     int16\_t \mbox{\hyperlink{class_pokemon_battle_aefd1b69e90dc7ef111f46aa5b4adc10f}{getHealthA}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyA-\/>at(m\_ActivePkmA).health; \}}
\DoxyCodeLine{172     int16\_t \mbox{\hyperlink{class_pokemon_battle_a03733dd299b2e8220cf314a47972e23b}{getHealthB}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyB-\/>at(m\_ActivePkmB).health; \}}
\DoxyCodeLine{173     int16\_t \mbox{\hyperlink{class_pokemon_battle_a7bc2b9b0c83bf1111d855078fba6261c}{getHPA}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyA-\/>at(m\_ActivePkmA).stats.hp; \}}
\DoxyCodeLine{174     int16\_t \mbox{\hyperlink{class_pokemon_battle_a82c2a6a94ce9febde76ae53d87919b41}{getHPB}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyB-\/>at(m\_ActivePkmB).stats.hp; \}}
\DoxyCodeLine{175     \textcolor{keywordtype}{float} \mbox{\hyperlink{class_pokemon_battle_a536c959b7b3b80cb0b81233d34cdcf1e}{getHealthPercA}}() \{ \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{float})\mbox{\hyperlink{class_pokemon_battle_aefd1b69e90dc7ef111f46aa5b4adc10f}{getHealthA}}()) / ((float)\mbox{\hyperlink{class_pokemon_battle_a7bc2b9b0c83bf1111d855078fba6261c}{getHPA}}()); \}}
\DoxyCodeLine{176     \textcolor{keywordtype}{float} \mbox{\hyperlink{class_pokemon_battle_a537908993f3600a8fdbca37523b4a3da}{getHealthPercB}}() \{ \textcolor{keywordflow}{return} ((\textcolor{keywordtype}{float})\mbox{\hyperlink{class_pokemon_battle_a03733dd299b2e8220cf314a47972e23b}{getHealthB}}()) / ((float)\mbox{\hyperlink{class_pokemon_battle_a82c2a6a94ce9febde76ae53d87919b41}{getHPB}}()); \}}
\DoxyCodeLine{177     int16\_t \mbox{\hyperlink{class_pokemon_battle_a8cea10f2fc0d36d7aa84553d7ae85eb3}{getLevelA}}()\textcolor{keyword}{  const }\{ \textcolor{keywordflow}{return} m\_PartyA-\/>at(m\_ActivePkmA).level; \}}
\DoxyCodeLine{178     int16\_t \mbox{\hyperlink{class_pokemon_battle_a9630d18b067907d0e7fbcdd971c663a9}{getLevelB}}()\textcolor{keyword}{  const }\{ \textcolor{keywordflow}{return} m\_PartyB-\/>at(m\_ActivePkmB).level; \}}
\DoxyCodeLine{179     uint8\_t \mbox{\hyperlink{class_pokemon_battle_ab936d588a4bc03a81218ed2693bf3af2}{getStatusA}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} (uint8\_t)m\_PartyA-\/>at(m\_ActivePkmA).condition; \}}
\DoxyCodeLine{180     uint8\_t \mbox{\hyperlink{class_pokemon_battle_a080cd8fb75560499199e3ee7a5a2038a}{getStatusB}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} (uint8\_t)m\_PartyB-\/>at(m\_ActivePkmB).condition; \}}
\DoxyCodeLine{181     std::string \mbox{\hyperlink{class_pokemon_battle_add1fd85590a2b9cb09bdafbd144baf69}{getNameA}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyA-\/>at(m\_ActivePkmA).nickname; \}}
\DoxyCodeLine{182     std::string \mbox{\hyperlink{class_pokemon_battle_a6126d1fb6cca0ee27b2336d8786d5196}{getNameB}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyB-\/>at(m\_ActivePkmB).nickname; \}}
\DoxyCodeLine{183     std::array<PokemonMove, 4>\& \mbox{\hyperlink{class_pokemon_battle_a2a9671ca4bac0ee7ccc92b3cb3107076}{getMovesA}}()\textcolor{keyword}{ const }\{ \textcolor{keywordflow}{return} m\_PartyA-\/>at(m\_ActivePkmA).moves; \}}
\DoxyCodeLine{184 }
\DoxyCodeLine{185     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_pokemon_battle_aaf5d017e23a66d7bfc8741e5a5223a07}{checkMoveValid}}(\mbox{\hyperlink{_pokemon_8h_ad2356a66d6868851b4e5138fe917e8eb}{MoveSlot}} slot) \{ \textcolor{keywordflow}{if} (m\_PartyA-\/>at(m\_ActivePkmA).moves[(\textcolor{keywordtype}{int})slot].type == PokemonType::None) \{ \textcolor{keywordflow}{return} \textcolor{keyword}{false}; \} \textcolor{keywordflow}{return} \textcolor{keyword}{true}; \}}
\DoxyCodeLine{186     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_pokemon_battle_a31b6e09fa9112be512ae8dfc28819a7a}{isUpdating}}() \{ \textcolor{keywordflow}{return} m\_IsUpdating; \}}
\DoxyCodeLine{187     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_pokemon_battle_a777ed1fe9ff4585cec218fe9c8fcf907}{isOver}}() \{ \textcolor{keywordflow}{return} m\_BattleOver; \}}
\DoxyCodeLine{188     }
\DoxyCodeLine{189     \textcolor{comment}{//Only to be called from battle thread -\/ otherwise will likely lock}}
\DoxyCodeLine{190     \textcolor{keyword}{static} \textcolor{keywordtype}{void} \mbox{\hyperlink{class_pokemon_battle_a3dcfc4fadf0f5d2bbc3e0fc61dcb247f}{awaitInput}}();}
\DoxyCodeLine{191     \textcolor{keyword}{static} \mbox{\hyperlink{class_s_g_random_1_1_random_container}{SGRandom::RandomContainer}} \mbox{\hyperlink{class_pokemon_battle_a3cdc9d4de14ad6cf167864d34964fc03}{random}};}
\DoxyCodeLine{192 }
\DoxyCodeLine{193     \textcolor{comment}{//Public turn helpers}}
\DoxyCodeLine{194     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_pokemon_battle_ab54902da85c8f29a2bb61b3f24edc59a}{checkFaintA}}(\textcolor{keywordtype}{bool} textEnabled);}
\DoxyCodeLine{195     \textcolor{keywordtype}{bool} \mbox{\hyperlink{class_pokemon_battle_a1905925c94d270fe7280fd3282fd02ae}{checkFaintB}}(\textcolor{keywordtype}{bool} textEnabled);}
\DoxyCodeLine{196 }
\DoxyCodeLine{197     \textcolor{comment}{//Text}}
\DoxyCodeLine{198     \textcolor{keyword}{static} \mbox{\hyperlink{class_game_g_u_i_1_1_text_buffer}{GameGUI::TextBuffer}} \mbox{\hyperlink{class_pokemon_battle_a693767ccbaf77707ed80940d14fb26f0}{textBuffer}};}
\DoxyCodeLine{199 }
\DoxyCodeLine{200 \textcolor{keyword}{private}:}
\DoxyCodeLine{201 }
\DoxyCodeLine{202     \textcolor{comment}{//Private turn helpers}}
\DoxyCodeLine{203     \textcolor{keywordtype}{void} nextMove();}
\DoxyCodeLine{204     \textcolor{keywordtype}{void} checkFaint(\textcolor{keywordtype}{bool} textEnabled); \textcolor{comment}{//See if any pokemon have fainted}}
\DoxyCodeLine{205     \textcolor{keywordtype}{bool} checkLossA(); \textcolor{comment}{//See if team A has no viable pokemon}}
\DoxyCodeLine{206     \textcolor{keywordtype}{bool} checkLossB(); \textcolor{comment}{//See if team B has no viable pokemon}}
\DoxyCodeLine{207     \textcolor{keywordtype}{bool} checkLoss();  \textcolor{comment}{//Check both}}
\DoxyCodeLine{208     \textcolor{keywordtype}{bool} replacePokemon(); \textcolor{comment}{//Force player or enemy to change out fainted pkm}}
\DoxyCodeLine{209     \textcolor{keywordtype}{void} nextViablePokemonB();}
\DoxyCodeLine{210 }
\DoxyCodeLine{211     \textcolor{keyword}{static} \textcolor{keyword}{enum class} Team : uint8\_t}
\DoxyCodeLine{212     \{}
\DoxyCodeLine{213         A, B}
\DoxyCodeLine{214     \};}
\DoxyCodeLine{215 }
\DoxyCodeLine{216     \textcolor{comment}{//Stack array containing next moves}}
\DoxyCodeLine{217     \mbox{\hyperlink{class_move_queue}{MoveQueue}} m\_MoveQueue;}
\DoxyCodeLine{218 }
\DoxyCodeLine{219     \textcolor{comment}{//Bool ptr to next button}}
\DoxyCodeLine{220     \textcolor{keyword}{static} \textcolor{keywordtype}{bool}* s\_Progress[2];}
\DoxyCodeLine{221 }
\DoxyCodeLine{222     \textcolor{comment}{//Pokemon}}
\DoxyCodeLine{223     \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* m\_PartyA = \textcolor{keyword}{nullptr}; \mbox{\hyperlink{_pokemon_8h_addae606221fd6d923aa4e675959f108a}{Party}}* m\_PartyB = \textcolor{keyword}{nullptr};}
\DoxyCodeLine{224     \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_ActivePkmA = 0; \textcolor{keywordtype}{unsigned} \textcolor{keywordtype}{int} m\_ActivePkmB = 0;}
\DoxyCodeLine{225     \mbox{\hyperlink{_pokemon_8h_ad2356a66d6868851b4e5138fe917e8eb}{MoveSlot}} m\_NextMoveA = MoveSlot::SLOT\_NULL;}
\DoxyCodeLine{226     \mbox{\hyperlink{_pokemon_8h_ad2356a66d6868851b4e5138fe917e8eb}{MoveSlot}} m\_NextMoveB = MoveSlot::SLOT\_NULL;}
\DoxyCodeLine{227     \mbox{\hyperlink{struct_current_stages}{CurrentStages}} m\_StagesA; \mbox{\hyperlink{struct_current_stages}{CurrentStages}} m\_StagesB;}
\DoxyCodeLine{228     \mbox{\hyperlink{_turn_8hpp_ab0ed5a40f5c765a4fb52cfb859bd04f0}{PokemonMoveState}} m\_PkmStateA = PokemonMoveState::Normal;}
\DoxyCodeLine{229     \mbox{\hyperlink{_turn_8hpp_ab0ed5a40f5c765a4fb52cfb859bd04f0}{PokemonMoveState}} m\_PkmStateB = PokemonMoveState::Normal;}
\DoxyCodeLine{230 }
\DoxyCodeLine{231     \textcolor{comment}{//Thread}}
\DoxyCodeLine{232     std::atomic<bool> m\_IsUpdating = \textcolor{keyword}{false};}
\DoxyCodeLine{233     std::atomic<bool> m\_BattleOver = \textcolor{keyword}{false};}
\DoxyCodeLine{234     std::function<void(\textcolor{keywordtype}{float},\textcolor{keywordtype}{float})> m\_HealthUpdate;}
\DoxyCodeLine{235 \};}
\DoxyCodeLine{236 }
\DoxyCodeLine{237 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
